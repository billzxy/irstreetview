(window.webpackJsonp=window.webpackJsonp||[]).push([[0],Array(35).concat([function(e){e.exports=[{id:"20190724143458",filename:"pano-20190724143458-mx.png",coord:{lat:42.36000896,lng:-71.05425626},calibration:2.1959999999999638,neighborhood:"quincy"},{id:"20190724143833",filename:"pano-20190724143833-mx.png",coord:{lat:42.36000888,lng:-71.05416259},calibration:2.6039999999999637,neighborhood:"quincy"},{id:"20190724145944",filename:"pano-20190724145944-mx.png",coord:{lat:42.36014171,lng:-71.0525956},calibration:-2.368000000000113,neighborhood:"atlave"},{id:"20190724151238",filename:"pano-20190724151238-mx.png",coord:{lat:42.35946,lng:-71.05190878},calibration:-2.872000000000005,neighborhood:"atlave"},{id:"20190724151553",filename:"pano-20190724151553-mx.png",coord:{lat:42.35901057,lng:-71.05173236},calibration:-.5760000000000074,neighborhood:"atlave"},{id:"20190724150711",filename:"pano-20190724150711-mx.png",coord:{lat:42.35976055,lng:-71.05235965},calibration:-1.352814692820381,neighborhood:"atlave"},{id:"20190925112226",filename:"pano-20190925112226-mx.png",calibration:-2.9,neighborhood:["caa","cab"],coord:{lat:42.45954294,lng:-71.35375977}},{id:"20190925112242",filename:"pano-20190925112242-mx.png",calibration:-2.252,neighborhood:"cab",coord:{lat:42.45956467,lng:-71.35345682}},{id:"20190925113249",filename:"pano-20190925113249-mx.png",calibration:-2.98,neighborhood:"caa",coord:{lat:42.45957315,lng:-71.35418699}},{id:"20190925112410",filename:"pano-20190925112410-mx.png",calibration:-2.444,neighborhood:"caa",coord:{lat:42.45966985,lng:-71.35391209}},{id:"20190925111418",filename:"pano-20190925111418-mx.png",calibration:-2.82,neighborhood:"cdt",coord:{lat:42.45969867,lng:-71.35140942}},{id:"20190925112757",filename:"pano-20190925112757-mx.png",calibration:-2.17,neighborhood:"caa",coord:{lat:42.45996776,lng:-71.35447809}},{id:"20190925110216",filename:"pano-20190925110216-mx.png",calibration:-1.7,neighborhood:"cdt",coord:{lat:42.45950405,lng:-71.35144528}},{id:"20190925112004",filename:"pano-20190925112004-mx.png",calibration:-2.91,neighborhood:"cab",coord:{lat:42.45927407,lng:-71.35335518}},{id:"20190925113346",filename:"pano-20190925113346-mx.png",calibration:-2.14,neighborhood:"caa",coord:{lat:42.45954963,lng:-71.354371}},{id:"20190925110449",filename:"pano-20190925110449-mx.png",calibration:-1.35,neighborhood:"cdt",coord:{lat:42.45962005,lng:-71.35099675}},{id:"20190925112944",filename:"pano-20190925112944-mx.png",calibration:-2.15,neighborhood:"caa",coord:{lat:42.45980487,lng:-71.35493824}},{id:"20190925111251",filename:"pano-20190925111251-mx.png",calibration:-1.82,neighborhood:"cdt",coord:{lat:42.45976744,lng:-71.35109601}},{id:"20190925111017",filename:"pano-20190925111017-mx.png",calibration:-3.38,neighborhood:"cdt",coord:{lat:42.45994194,lng:-71.35046685}},{id:"20190925112929",filename:"pano-20190925112929-mx.png",calibration:-2.77,neighborhood:"caa",coord:{lat:42.45967437,lng:-71.35489279}},{id:"20190925110659",filename:"pano-20190925110659-mx.png",calibration:-2.86,neighborhood:"cdt",coord:{lat:42.45980818,lng:-71.35042955}},{id:"20190925112754",filename:"pano-20190925112754-mx.png",calibration:-3.01,neighborhood:"caa",coord:{lat:42.4598957,lng:-71.35475797}},{id:"20190925112418",filename:"pano-20190925112418-mx.png",calibration:-2.94,neighborhood:"caa",coord:{lat:42.45977151,lng:-71.35404583}},{id:"20190925111907",filename:"pano-20190925111907-mx.png",calibration:2.82,neighborhood:"cab",coord:{lat:42.4594054,lng:-71.35342462}},{id:"20190925111628",filename:"pano-20190925111628-mx.png",calibration:-3.05,neighborhood:"cdt",coord:{lat:42.45958235,lng:-71.35173774}},{id:"20190925113109",filename:"pano-20190925113109-mx.png",calibration:-2.95,neighborhood:"caa",coord:{lat:42.45951864,lng:-71.35461781}}]},,,,,,,,,,,,,,,function(e,t,n){var a={"./pano-20190724143458-mx.png":126,"./pano-20190724143833-mx.png":127,"./pano-20190724145944-mx.png":128,"./pano-20190724150711-mx.png":129,"./pano-20190724151238-mx.png":130,"./pano-20190724151553-mx.png":131,"./pano-20190925110216-mx.png":132,"./pano-20190925110449-mx.png":133,"./pano-20190925110659-mx.png":134,"./pano-20190925111017-mx.png":135,"./pano-20190925111251-mx.png":136,"./pano-20190925111418-mx.png":137,"./pano-20190925111628-mx.png":138,"./pano-20190925111907-mx.png":139,"./pano-20190925112004-mx.png":140,"./pano-20190925112226-mx.png":141,"./pano-20190925112242-mx.png":142,"./pano-20190925112410-mx.png":143,"./pano-20190925112418-mx.png":144,"./pano-20190925112754-mx.png":145,"./pano-20190925112757-mx.png":146,"./pano-20190925112929-mx.png":147,"./pano-20190925112944-mx.png":148,"./pano-20190925113109-mx.png":149,"./pano-20190925113249-mx.png":150,"./pano-20190925113346-mx.png":151};function o(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=r,e.exports=o,o.id=50},,,function(e){e.exports={quincy:{type:"linear",map:["20190724143458","20190724143833"]},cdt:{type:"irregular",map:{20190925111628:["20190925111418","20190925110216"],20190925110216:["20190925111628","20190925111418","20190925110449"],20190925111418:["20190925111628","20190925110216","20190925111251"],20190925111251:["20190925111418","20190925110449","20190925111017"],20190925110449:["20190925110216","20190925111251","20190925110659"],20190925110659:["20190925110449","20190925111017"],20190925111017:["20190925110659","20190925111251"]}},caa:{type:"circular",map:["20190925112410","20190925112226","20190925113249","20190925113346","20190925113109","20190925112929","20190925112944","20190925112754","20190925112757","20190925112418"]},cab:{type:"linear",map:["20190925112226","20190925112242","20190925111907","20190925112004"]},atlave:{type:"linear",map:["20190724151553","20190724151238","20190724150711","20190724145944"]}}},,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(155)},,,,function(e,t,n){},,,,,,,,,,,,,,,,,,,,function(e,t){e.exports="data:image/png;base64,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"},,function(e,t,n){},,function(e,t,n){e.exports=n.p+"static/media/rotating.4957277e.png"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAMAAACecocUAAAACXBIWXMAAAAcAAAAHAAPAbmPAAAAIVBMVEUAAABVnbVRnbVRnbVdpb2l4fpVnb1dqcFVnblVobmFyeFl3ybiAAAAC3RSTlMAtb18tGwapUy9gIWpoGAAAABESURBVHja7f3HAcQwDMMAkFSzvf/A8V2aMgRfENRWAJBG0XITBuXl4tiWc0XEmkyYfrgLGehxxgnVxaWP7/P9Tr/f/h6CtgH6SIBB6wAAAABJRU5ErkJggg=="},,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"static/media/compass.17996e69.svg"},,function(e,t,n){e.exports=n.p+"static/media/pano-20190724143458-mx.072de3d6.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190724143833-mx.0732614b.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190724145944-mx.0c7531e1.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190724150711-mx.f67813cf.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190724151238-mx.3f9e7726.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190724151553-mx.c1e8bceb.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925110216-mx.15966b2a.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925110449-mx.5b18415f.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925110659-mx.a9cd19bd.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925111017-mx.d1eacec2.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925111251-mx.3a2748ab.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925111418-mx.80a5715d.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925111628-mx.c890f6ed.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925111907-mx.f5896ac6.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925112004-mx.7f51a340.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925112226-mx.a1e5bd11.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925112242-mx.4589189c.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925112410-mx.5e375cce.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925112418-mx.f8ad88bb.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925112754-mx.e2a0bfca.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925112757-mx.702d7268.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925112929-mx.dad914bf.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925112944-mx.fdd79d67.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925113109-mx.1c1e94e1.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925113249-mx.798912fc.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925113346-mx.0775a445.png"},,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(22),i=n.n(r),c=(n(78),n(5)),s=n(6),l=n(18),u=n(16),p=n(17),d=n(29),m=n(23),h=n(11),g=n(12);function f(){var e=Object(h.a)(["\n\tflex: 1;\n\tpadding: 2px;\n\tpadding-top: ","px;\n"]);return f=function(){return e},e}function b(){var e=Object(h.a)(["\n\tposition: fixed;\n\tz-index: 999;\n\ttop: 10px;\n\tright: 10px;\n\tpadding: 12px;\n\theight: 20px;\n\tdisplay: flex;\n\tjustify-content: flex-start;\n\talign-items: center;\n\tbackground-color: #f8f8f8;\n    box-shadow: 2px 2px gray;\n\tcursor: pointer;\n\t& .ir-nav-item {\n\t\tmargin-right: 0.5rem;\n\t\tmargin-left: 0.5rem;\n\t\ttext-decoration: none;\n\t\tcolor: rgba(0, 0, 0, 0.5);\n\t}\n\n\t& .ir-nav-item__active {\n\t\tcolor: #000000;\n\t}\n"]);return b=function(){return e},e}function v(){var e=Object(h.a)(["\n\twidth: 100vw;\n\theight: 100vh;\n\tdisplay: flex;\n\tflex-direction: column;\n"]);return v=function(){return e},e}var y=g.a.div(v()),x=g.a.div(b()),w=g.a.div(f(),2),A=n(3),P=n.n(A),O=n(8),k=n(24),j=n(35),E=n(53);function M(e,t,n){if(!n)for(var a=0;a<e.length;a++){var o=[],r=!0,i=!1,c=void 0;try{for(var s,l=t[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;o.push(e[a][u])}}catch(v){i=!0,c=v}finally{try{r||null==l.return||l.return()}finally{if(i)throw c}}return o}for(a=0;a<e.length;a++)if(e[a].id===n){if(0===t.length)return e[a];var p={},d=!0,m=!1,h=void 0;try{for(var g,f=t[Symbol.iterator]();!(d=(g=f.next()).done);d=!0){var b=g.value;p[b]=e[a][b]}}catch(v){m=!0,h=v}finally{try{d||null==f.return||f.return()}finally{if(m)throw h}}return p}}function S(e,t){if(Array.isArray(t)){var n=[],a=!0,o=!1,r=void 0;try{for(var i,c=t[Symbol.iterator]();!(a=(i=c.next()).done);a=!0){var s=i.value,l=C(e,E[s]);Array.prototype.push.apply(n,l)}}catch(u){o=!0,r=u}finally{try{a||null==c.return||c.return()}finally{if(o)throw r}}return n}return C(e,E[t])}function C(e,t){if(t.map.length<2)return[];switch(t.type){case"linear":for(var n=0;n<t.map.length;n++)if(e===t.map[n])return 0===n?[t.map[1]]:n===t.map.length-1?[t.map[t.map.length-2]]:[t.map[n-1],t.map[n+1]];break;case"circular":for(n=0;n<t.map.length;n++)if(e===t.map[n])return 0===n?[t.map[1],t.map[t.map.length-1]]:n===t.map.length-1?[t.map[t.map.length-2],t.map[0]]:[t.map[n-1],t.map[n+1]];break;case"irregular":return t.map[e]}}var B={getPanoFileNameById:function(e){return Promise.resolve({data:{data:M(j,["filename"],e)}})},getPanoCoordById:function(e){return Promise.resolve({data:{data:M(j,["coord"],e)}})},getAllPanoIdAndCoord:function(){return Promise.resolve({data:{data:j}})},getPanoAllAttrById:function(e){return Promise.resolve({data:{data:M(j,[],e)}})},getNeighborsById:function(e,t){return Promise.resolve({data:{data:S(e,t)}})}};function I(){var e=Object(h.a)(["\n  width: 100%;\n  height: 100%;\n  display: ",";\n\n  & > div {\n    width: 100%;\n    height: 100%;\n  }\n"]);return I=function(){return e},e}function R(){var e=Object(h.a)(["\n  width: 100%;\n  height: 100%;\n  position: relative !important;\n"]);return R=function(){return e},e}var D,L,V,Y,T,N,F,z=n(97),G=Object(g.a)(k.Map)(R()),U=g.a.div(I(),function(e){var t=e.show;return void 0!==t&&t?"block":"none"}),J={boston:{lat:42.36,lng:-71.053},concord:{lat:42.45955,lng:-71.3525},center:{lat:42.4,lng:-71.2}},H=function e(t){if(Array.isArray(t))return e(t[0]);switch(t){case"quincy":case"atlave":return"boston";case"caa":case"cab":case"cdt":return"concord"}return null},W=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).map=void 0,a.showGSV=!1,a.isClustererRendered=!1,a.markerClusterer=void 0,a.bounds=new a.props.google.maps.LatLngBounds,a.Clusterer=function(e){var t=e.map,o=e.google;return a.isClustererRendered?null:t?0===a.state.coords.length?null:(a.map=t,a.markerClusterer=new z(t,a.addMarkers(t,o),{styles:[{width:53,height:52,url:n(98),textColor:"white"}],gridSize:20,minimumClusterSize:6}),a.isClustererRendered=!0,null):null},a.state={coords:[]},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;(function(){var t=Object(O.a)(P.a.mark(function t(){return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.getAllPanoIdAndCoord().then(function(t){for(var n=[],a=t.data.data,o=0;o<a.length;o++)n.push({id:a[o].id,lat:a[o].coord.lat,lng:a[o].coord.lng,region:H(a[o].neighborhood)});e.setState({coords:n})});case 2:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}})()()}},{key:"componentDidUpdate",value:function(e){if(this.map){var t=e.location.pathname.split("/")[1];"PUSH"===this.props.history.action&&"viewPano"===t&&(this.showGSV=!1),this.showGSV||this.map.streetView.setVisible(!1),"viewPano"===t&&(this.showGSV=!1)}}},{key:"setBounds",value:function(){var e=this.state.coords;if(e)for(var t=0;t<e.length;t++){var n=e[t];this.bounds.extend(new this.props.google.maps.LatLng({lat:n.lat,lng:n.lng}))}}},{key:"addMarkers",value:function(e,t){var n=this,a=this.state.coords;if(a)return a.map(function(a,o){var r=new t.maps.Marker({position:{lat:a.lat,lng:a.lng},map:e,title:a.id+"&"+a.region});return t.maps.event.addListener(r,"click",function(){n.gotoPano(r.title)}),r})}},{key:"gotoPano",value:function(e){var t=e.split("&"),n=t[0],a=t[1];this.map.streetView.visible&&(this.showGSV=!0),this.props.history.push("/maps/".concat(a)),this.props.history.push("/viewPano/".concat(n))}},{key:"goBack",value:function(){this.props.history.goBack(),console.log("go back")}},{key:"render",value:function(){return o.a.createElement(G,{ref:this.props.onMapMounted,google:this.props.google,zoom:11,center:J[this.region],initialCenter:J.center,bounds:this.bounds},o.a.createElement(this.Clusterer,null))}},{key:"region",get:function(){return this.props.match?this.props.match.params.region:"boston"}}]),t}(a.Component),X=Object(k.GoogleApiWrapper)({apiKey:"".concat("AIzaSyAwmnfBgRgSFnydLrrkAJ2gYBfarvA7Fu4")})(W),K=Object(m.f)(function(e){return Object(a.useEffect)(function(){return function(){console.log("GMap...dying")}},[]),o.a.createElement(U,{show:!!e.match},o.a.createElement(X,e))}),q=n(21),Q=n(41),Z=n(1),_=n(44),$=n(69),ee=(n(100),n(31)),te=n(32),ne=(n(101),n(2)),ae=n(43);function oe(){var e=Object(h.a)(["\n\twidth: 100%;\n\theight: 100%;\n\n\t& > div {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n"]);return oe=function(){return e},e}function re(){var e=Object(h.a)(["\n\twidth: 100% !important;\n\theight: 100% !important;\n\tposition: relative !important;\n"]);return re=function(){return e},e}var ie,ce,se=Object(g.a)(k.Map)(re()),le=g.a.div(oe()),ue=function(){(ie=document.getElementsByClassName("Minimap")[0]).addEventListener("mouseover",function(e){return function(e){e.preventDefault(),ie.style.width="250px",ie.style.height="200px"}(e)},!1),ie.addEventListener("mouseout",function(e){return function(e){e.preventDefault(),ie.style.width="200px",ie.style.height="100px"}(e)},!1),(ce=document.getElementsByClassName("InfoBox")[0]).addEventListener("mouseover",function(e){return function(e){e.preventDefault(),ce.style.opacity="0.75"}(e)},!1),ce.addEventListener("mouseout",function(e){return function(e){e.preventDefault(),ce.style.opacity="0.5"}(e)},!1),ce.addEventListener("mousedown",function(e){return function(e){e.preventDefault(),window.history.back()}(e)},!1)};var pe=(D=function(){function e(t,n,a,o){Object(c.a)(this,e),Object(ee.a)(this,"lng",L,this),Object(ee.a)(this,"lat",V,this),Object(ee.a)(this,"id",Y,this),Object(ee.a)(this,"pmanOffsetY",T,this),Object(ee.a)(this,"cameraY",N,this),this.lng=n,this.lat=t,this.id=o,this.cameraY=a,this.pmanOffsetY=this.setPegmanRotationOffsetYFromCameraY(a)}return Object(s.a)(e,[{key:"updateValues",value:function(e,t,n,a){this.lng=t,this.lat=e,this.id=a,this.cameraY=n,this.pmanOffsetY=this.setPegmanRotationOffsetYFromCameraY(n)}},{key:"updatePegmanOffset",value:function(e){this.cameraY=e,this.pmanOffsetY=this.setPegmanRotationOffsetYFromCameraY(e)}},{key:"setPegmanRotationOffsetYFromCameraY",value:function(e){var t=Math.ceil(180*-e/Math.PI);return t<0&&(t=360+t),9+60*Math.floor(t/22.5)}}]),e}(),L=Object(te.a)(D.prototype,"lng",[ne.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=Object(te.a)(D.prototype,"lat",[ne.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=Object(te.a)(D.prototype,"id",[ne.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=Object(te.a)(D.prototype,"pmanOffsetY",[ne.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=Object(te.a)(D.prototype,"cameraY",[ne.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D),de=function(e){var t=e.id,a=e.lat,r=e.lng,i=e.pmanOffsetY,c=e.google,s=e.map,l=e.mapCenter,u=new c.maps.Point(8,9);i&&(u=new c.maps.Point(8,i));var p={url:n(102),size:new c.maps.Size(44,49),origin:u,anchor:new c.maps.Point(22,34),custom:!0};return o.a.createElement(k.Marker,{lid:t,position:{lat:a,lng:r},icon:p,key:t,google:c,map:s,mapCenter:l,zIndex:100})},me=Object(ae.a)(F=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).pStore=void 0,a.bounds=new a.props.google.maps.LatLngBounds,a.dotIcon={url:n(103),size:new a.props.google.maps.Size(11,11),origin:new a.props.google.maps.Point(0,0),anchor:new a.props.google.maps.Point(5.5,5.5)},a.state={showComp:!1},a.pStore=a.props.panoPageStore,a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;(function(){var t=Object(O.a)(P.a.mark(function t(){return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.getAllPanoIdAndCoord().then(function(t){for(var n=[],a=t.data.data,o=0;o<a.length;o++)n.push({id:a[o].id,lat:a[o].coord.lat,lng:a[o].coord.lng});e.setState({coords:n,showComp:!0})});case 2:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}})()()}},{key:"showComponent",value:function(e){!0!==e&&!1!==e||this.setState({showComp:e})}},{key:"setBounds",value:function(){for(var e=0;e<this.state.coords.length;e++){var t=this.state.coords[e];this.bounds.extend(new this.props.google.maps.LatLng({lat:t.lat,lng:t.lng}))}}},{key:"addMarkers",value:function(){var e,t=this;this.setBounds();var n=1;return this.state.coords.map(function(a,r){if(t.state.coords[r].id!==t.pStore.id)return e=t.dotIcon,n++,o.a.createElement(k.Marker,{lid:a.id,position:{lat:a.lat,lng:a.lng},onClick:function(e){return t.gotoPano(e.lid)},icon:e,key:a.id,zIndex:n})})}},{key:"gotoPano",value:function(e){this.pStore.id=e}},{key:"render",value:function(){return this.state.showComp?o.a.createElement(o.a.Fragment,null,o.a.createElement(se,{ref:this.props.onMapMounted,google:this.props.google,zoom:17,center:{lat:this.pStore.lat,lng:this.pStore.lng},initialCenter:{lat:this.pStore.lat,lng:this.pStore.lng},bounds:this.bounds,onReady:ue,streetViewControl:!1,fullscreenControl:!1,mapTypeControl:!1,rotateControl:!1},o.a.createElement(de,{id:this.pStore.id,lat:this.pStore.lat,lng:this.pStore.lng,pmanOffsetY:this.pStore.pmanOffsetY}),this.addMarkers())):null}}]),t}(a.Component))||F,he=Object(k.GoogleApiWrapper)({apiKey:"".concat("AIzaSyAwmnfBgRgSFnydLrrkAJ2gYBfarvA7Fu4")})(Object(m.f)(me)),ge=function(e){function t(e){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"backBox",value:function(){return o.a.createElement("div",null,o.a.createElement("span",null," \u2190 "))}},{key:"textBox",value:function(){return o.a.createElement("div",null)}},{key:"render",value:function(){return o.a.createElement(this.backBox,null)}}]),t}(a.Component),fe=function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"Minimap"},o.a.createElement(le,null,o.a.createElement(he,e))),o.a.createElement("div",{className:"InfoBox"},o.a.createElement(ge,null)))},be=n(56),ve=function(){function e(t){var n=this;Object(c.a)(this,e),this.coord={lat:0,lng:0},this.calibration=0,this.id=void 0,this.fname="",this.neighborhood="",this.neighborArr=void 0,this.cameraY=void 0,this.setAllAttr=Object(O.a)(P.a.mark(function e(){return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.getPanoAllAttrById(n.id).then(function(e){n.fname=e.data.data.filename,n.coord.lat=e.data.data.coord.lat,n.coord.lng=e.data.data.coord.lng,n.calibration=e.data.data.calibration,n.neighborhood=e.data.data.neighborhood});case 2:case"end":return e.stop()}},e)})),this.getNeighborIds=Object(O.a)(P.a.mark(function e(){return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.getNeighborsById(n.id,n.neighborhood).then(function(e){n.neighborArr=e.data.data});case 2:case"end":return e.stop()}},e)})),this.updateCalibration=function(){var e=Object(O.a)(P.a.mark(function e(t){return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:({calibration:-t.rotation.y}),alert("Update Calibration is disabled at this moment!");case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.id=t}return Object(s.a)(e,[{key:"getDistanceTo",value:function(e){return be.getDistance(this.coord,e.coord)}},{key:"getDistanceToNeighbors",value:function(e){return e.map(this.getDistanceTo)}},{key:"getBearingTo",value:function(e){return be.getRhumbLineBearing(this.coord,e.coord)}},{key:"getBearingToNeighbors",value:function(e){return e.map(this.getBearingTo)}}]),e}(),ye=function(){function e(){Object(c.a)(this,e),this.mesh=void 0,this.material=void 0,this.geometry=void 0,this.hitbox=void 0,this.id=void 0,this.geometry=new Z.Geometry,this.geometry.vertices.push(new Z.Vector3(0,0,0),new Z.Vector3(1.5,-2,0),new Z.Vector3(1.5,-.5,0),new Z.Vector3(0,1.5,0),new Z.Vector3(-1.5,-.5,0),new Z.Vector3(-1.5,-2,0)),this.geometry.faces.push(new Z.Face3(0,1,2),new Z.Face3(0,2,3),new Z.Face3(4,0,3),new Z.Face3(5,0,4)),this.hitbox=new Z.Geometry;this.hitbox.vertices.push(new Z.Vector3(0,0,0),new Z.Vector3(1.8,-2.3,0),new Z.Vector3(1.8,-.2,0),new Z.Vector3(0,1.8,0),new Z.Vector3(-1.8,-.2,0),new Z.Vector3(-1.8,-2.3,0)),this.hitbox.faces.push(new Z.Face3(0,1,2),new Z.Face3(0,2,3),new Z.Face3(4,0,3),new Z.Face3(5,0,4),new Z.Face3(5,1,0))}return Object(s.a)(e,[{key:"onClickHandler",value:function(){}}]),e}();function xe(){var e=Object(h.a)(["\n\t&,\n\t&:after {\n\t\tborder-radius: 50%;\n\t\twidth: ","px;\n\t\theight: ","px;\n\t}\n\t& {\n\t\tmargin: 60px auto;\n\t\tfont-size: 10px;\n\t\tposition: relative;\n\t\ttext-indent: -9999em;\n\t\tborder-top: 1.1em solid rgba(0, 0, 0, 0.1);\n\t\tborder-right: 1.1em solid rgba(0, 0, 0, 0.1);\n\t\tborder-bottom: 1.1em solid rgba(0, 0, 0, 0.1);\n\t\tborder-left: 1.1em solid ",";\n\t\t-webkit-transform: translateZ(0);\n\t\t-ms-transform: translateZ(0);\n\t\ttransform: translateZ(0);\n\t\t-webkit-animation: load8 1.1s infinite linear;\n\t\tanimation: load8 1.1s infinite linear;\n\t}\n\t@-webkit-keyframes load8 {\n\t\t0% {\n\t\t\t-webkit-transform: rotate(0deg);\n\t\t\ttransform: rotate(0deg);\n\t\t}\n\t\t100% {\n\t\t\t-webkit-transform: rotate(360deg);\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n\t@keyframes load8 {\n\t\t0% {\n\t\t\t-webkit-transform: rotate(0deg);\n\t\t\ttransform: rotate(0deg);\n\t\t}\n\t\t100% {\n\t\t\t-webkit-transform: rotate(360deg);\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n"]);return xe=function(){return e},e}var we,Ae=g.a.div(xe(),function(e){var t=e.width;return void 0===t?"48":t},function(e){var t=e.width;return void 0===t?"48":t},function(e){var t=e.color;return void 0===t?"#ea6c2f":t}),Pe=Object(ae.a)(we=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).compassRotationReactionDisposer=void 0,a.svgSrc=n(124),a.CompassElement=function(){return o.a.createElement("div",null,o.a.createElement("img",{src:a.svgSrc,alt:"Compass"}))},a.RotateCompass=function(e){var t=Math.ceil(180*-e/Math.PI);t<0&&(t=360+t),document.getElementById("compassDom").style.transform="rotate(".concat(t-62,"deg)"),console.log(t)},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.setCompassRotationReaction()}},{key:"setCompassRotationReaction",value:function(){var e=this;this.compassRotationReactionDisposer=Object(ne.l)(function(){return e.props.panoPageStore.cameraY},function(t,n){e.RotateCompass(t)})}},{key:"render",value:function(){return o.a.createElement("div",{id:"compassDom"},o.a.createElement(this.CompassElement,null))}}]),t}(a.Component))||we,Oe=n(125),ke=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).currLoc=void 0,a.neighbors=void 0,a.panoPageStore=void 0,a.panoIdChangeReactionDisposer=void 0,a.canvasStyle={cursor:"default"},a.cylindergeometry=new Z.CylinderBufferGeometry(20,20,15,100,1,!0),a.cylindermaterial=void 0,a.cylindermesh=void 0,a.texture=void 0,a.loader=new Z.TextureLoader,a.lines=[],a.tempcylindergeometry=new Z.CylinderBufferGeometry(21,21,15,100,1,!0),a.tempcylindermaterial=void 0,a.tempcylindermesh=void 0,a.threeCamera=void 0,a.threeScene=void 0,a.cone0=void 0,a.cone1=void 0,a.cone2=void 0,a.conevis0=void 0,a.conevis1=void 0,a.conevis2=void 0,a.coneg0=void 0,a.coneg1=void 0,a.coneg2=void 0,a.pinSphereGeometry=new Z.SphereGeometry(.5,16,16),a.pinNeedleGeometry=new Z.CylinderGeometry(.075,.025,3,10,1,!1),a.pin0=void 0,a.pin1=void 0,a.pin2=void 0,a.n0=void 0,a.n1=void 0,a.n2=void 0,a.mouseSelectedArrowMesh=void 0,a.teleportToScene=function(){var e=Object(O.a)(P.a.mark(function e(t){return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.currLoc=new ve(t),e.next=3,a.currLoc.setAllAttr().then(function(){a.texture=a.loader.load(n(50)("./".concat(a.currLoc.fname)),function(){a.tempcylindermaterial=new Z.MeshBasicMaterial({map:a.texture,side:Z.DoubleSide}),a.tempcylindermesh=new Z.Mesh(a.tempcylindergeometry,a.tempcylindermaterial),a.tempcylindergeometry.scale(-1,1,1),a.tempcylindermesh.rotation.y=a.currLoc.calibration,a.threeScene.add(a.tempcylindermesh),a.animateTeleportationTextureFade();var e=a.currLoc,t=e.coord,n=e.cameraY,o=e.id;a.panoPageStore.updateValues(t.lat,t.lng,n,o)},void 0,function(e){console.error(e)})});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.animateTeleportationTextureFade=function(){var e={at:a.cylindermaterial.opacity},t=new Oe.Tween(e).to({at:.1},500).easing(Oe.Easing.Quadratic.InOut);t.onUpdate(function(){a.cylindermaterial.opacity=e.at}),t.onComplete(Object(O.a)(P.a.mark(function e(){return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.threeCamera.rotation.y=0,a.threeCamera.fov=40,a.threeCamera.updateProjectionMatrix(),a.cylindermaterial.map=a.texture,a.cylindermesh.rotation.y=a.currLoc.calibration,a.cylindermaterial.transparent=!1,a.cylindermaterial.opacity=1,a.threeScene.remove(a.tempcylindermesh),a.tempcylindermesh.geometry.dispose(),a.tempcylindermesh.material.dispose(),a.tempcylindermesh=void 0,a.tempcylindergeometry.scale(-1,1,1),e.next=14,a.setNeighbors().then(a.RenderArrows);case 14:case"end":return e.stop()}},e)}))),a.cylindermaterial.transparent=!0,t.start()},a.RenderArrows=function(){var e=a.neighbors.keys();a.n0=a.neighbors.get(e.next().value),console.log(a.currLoc.id);a.cone0.position.z=-7.5*Math.cos(a.n0.bearing*Math.PI/180),a.cone0.position.x=7.5*Math.sin(a.n0.bearing*Math.PI/180),a.cone0.rotation.x=-1.5708,a.cone0.rotation.z=-a.n0.bearing*Math.PI/180,a.conevis0.position.z=-7.5*Math.cos(a.n0.bearing*Math.PI/180),a.conevis0.position.x=7.5*Math.sin(a.n0.bearing*Math.PI/180),a.conevis0.rotation.x=-1.5708,a.conevis0.rotation.z=-a.n0.bearing*Math.PI/180,a.coneg1.visible=!1,a.coneg2.visible=!1,a.neighbors.size>1&&(a.n1=a.neighbors.get(e.next().value),a.coneg1.visible=!0,a.cone1.position.z=-7.5*Math.cos(a.n1.bearing*Math.PI/180),a.cone1.position.x=7.5*Math.sin(a.n1.bearing*Math.PI/180),a.cone1.rotation.x=-1.5708,a.cone1.rotation.z=-a.n1.bearing*Math.PI/180,a.conevis1.position.z=-7.5*Math.cos(a.n1.bearing*Math.PI/180),a.conevis1.position.x=7.5*Math.sin(a.n1.bearing*Math.PI/180),a.conevis1.rotation.x=-1.5708,a.conevis1.rotation.z=-a.n1.bearing*Math.PI/180),3===a.neighbors.size&&(a.n2=a.neighbors.get(e.next().value),a.coneg2.visible=!0,a.cone2.position.z=-7.5*Math.cos(a.n2.bearing*Math.PI/180),a.cone2.position.x=7.5*Math.sin(a.n2.bearing*Math.PI/180),a.cone2.rotation.x=-1.5708,a.cone2.rotation.z=-a.n2.bearing*Math.PI/180,a.conevis2.position.z=-7.5*Math.cos(a.n2.bearing*Math.PI/180),a.conevis2.position.x=7.5*Math.sin(a.n2.bearing*Math.PI/180),a.conevis2.rotation.x=-1.5708,a.conevis2.rotation.z=-a.n2.bearing*Math.PI/180)},a.state={isLoading:!0},a.RenderPano=a.RenderPano.bind(Object(Q.a)(a)),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object($.disableBodyScroll)(document.querySelector("#interface")),function(){var t=Object(O.a)(P.a.mark(function t(){return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.currLoc=new ve(e.panoId),t.next=3,e.currLoc.setAllAttr().then(function(){e.loadTexture()});case 3:e.neighbors=new Map,e.setNeighbors();case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()()}},{key:"componentWillUnmount",value:function(){console.log("Unmount pano...")}},{key:"setNeighbors",value:function(){var e=Object(O.a)(P.a.mark(function e(){var t,n,a,o,r,i,c,s=this;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.neighbors.clear(),e.next=3,this.currLoc.getNeighborIds();case 3:if(0!==(t=this.currLoc.neighborArr).length){e.next=9;break}return console.log("No neighbors discorvered..."),e.abrupt("return");case 9:n=!0,a=!1,o=void 0,e.prev=12,r=P.a.mark(function e(){var t,n;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.value,n=new ve(t),e.next=4,n.setAllAttr().then(function(){s.addNeighbor(n)});case 4:case"end":return e.stop()}},e)}),i=t[Symbol.iterator]();case 15:if(n=(c=i.next()).done){e.next=20;break}return e.delegateYield(r(),"t0",17);case 17:n=!0,e.next=15;break;case 20:e.next=26;break;case 22:e.prev=22,e.t1=e.catch(12),a=!0,o=e.t1;case 26:e.prev=26,e.prev=27,n||null==i.return||i.return();case 29:if(e.prev=29,!a){e.next=32;break}throw o;case 32:return e.finish(29);case 33:return e.finish(26);case 34:case"end":return e.stop()}},e,this,[[12,22,26,34],[27,,29,33]])}));return function(){return e.apply(this,arguments)}}()},{key:"addNeighbor",value:function(e){this.neighbors.set(e.id,{location:e,distance:this.currLoc.getDistanceTo(e),bearing:this.currLoc.getBearingTo(e)})}},{key:"toggleCursor",value:function(e){this.canvasStyle=e?{cursor:"pointer"}:{cursor:"default"}}},{key:"setPanoPageStoreIDChangeReaction",value:function(){var e=this;this.panoIdChangeReactionDisposer=Object(ne.l)(function(){return e.panoPageStore.id},function(t,n){e.teleportToScene(t)})}},{key:"loadTexture",value:function(){var e=this;this.texture=this.loader.load(n(50)("./".concat(this.currLoc.fname)),function(){e.panoPageStore=new pe(e.currLoc.coord.lat,e.currLoc.coord.lng,0,e.currLoc.id),e.setPanoPageStoreIDChangeReaction(),e.setState({isLoading:!1})},void 0,function(e){console.error(e)}),this.cylindermaterial=new Z.MeshBasicMaterial({map:this.texture,side:Z.DoubleSide}),this.cylindermesh=new Z.Mesh(this.cylindergeometry,this.cylindermaterial),this.cylindergeometry.scale(-1,1,1),this.cylindermesh.rotation.y=this.currLoc.calibration}},{key:"CameraLookNorth",value:function(e){var t=this,n={at:e.rotation.y},a=new Oe.Tween(n).to({at:0},750).easing(Oe.Easing.Quadratic.InOut);a.onUpdate(function(){e.rotation.y=n.at}),a.onComplete(function(){e.rotation.y=0,t.panoPageStore.updatePegmanOffset(0)}),a.start()}},{key:"RenderPano",value:function(){var e=this,t=Object(_.c)(),r=t.gl,i=t.camera,c=t.scene,s=t.canvas,l=t.raycaster;this.threeCamera=i,this.threeScene=c,i.fov=40,r.setSize(s.clientWidth,s.clientHeight),i.position.set(0,0,0),i.lookAt(0,0,0);var u=new ye,p=Object(a.useRef)(),d=Object(a.useRef)(),m=Object(a.useRef)(),h=Object(a.useRef)();this.cone0=p.current,this.cone1=d.current,this.cone2=m.current;var g=Object(a.useRef)();this.conevis0=g.current;var f=Object(a.useRef)();this.conevis1=f.current;var b=Object(a.useRef)();this.conevis2=b.current;var v=Object(a.useRef)();this.coneg0=v.current;var y=Object(a.useRef)();this.coneg1=y.current;var x,w,A,k=Object(a.useRef)();this.coneg2=k.current;var j=[x,w,A],E={x:0,y:0},M=new ye,S=Object(a.useRef)(),C=!1,B=[],I=new Z.PlaneGeometry(40,40),R=new Z.MeshBasicMaterial({color:"grey",side:Z.DoubleSide,opacity:0,transparent:!0}),D=new Z.Mesh(I,R);D.rotation.set(-1.5708,0,0),D.position.set(0,-1,0),c.add(D);if(this.cone0&&this.cone1&&this.cone2&&h.current&&(B.push(this.cone0),B.push(this.cone1),B.push(this.cone2),B.push(D)),Object(a.useRef)().current){this.cone0.geometry.computeBoundingSphere();var L=this.cone0.geometry.boundingSphere.center,V=new Z.Vector3(L.x,L.y,L.z);J.current.localToWorld(V)}var Y=function(e,t){S.current.children[1].geometry.computeBoundingSphere();var n=S.current.children[1].geometry.boundingSphere.center,a=new Z.Vector3(n.x,n.y,n.z);S.current.localToWorld(a),e.geometry.computeBoundingSphere(),j[t]=e.geometry.boundinSphere;var o=e.geometry.boundingSphere.center,r=new Z.Vector3(o.x,o.y,o.z);return e.localToWorld(r),a.distanceTo(r)},T=!1,N=0;var F=0;var z=function(t){0!==t&&(C=!0),i.rotation.y+=t/1e3,i.rotation.y%=2*Math.PI,e.panoPageStore.updatePegmanOffset(i.rotation.y)};window.addEventListener("mousemove",function(e){if(!T&&S.current){e.preventDefault(),E.x=e.clientX/window.innerWidth*2-1,E.y=-e.clientY/window.innerHeight*2+1,l.setFromCamera(E,i);var t=l.intersectObjects(B);if(t.length>0){var n=t[0];1===t.length?(S.current.visible=!0,S.current.position.copy(n.point).add(new Z.Vector3(0,.01,0))):S.current.visible=!1}}},!1),s.addEventListener("mousemove",function(e){return function(e){if(T){e.preventDefault();var t=e.clientX-N;e.clientY,N=e.clientX,e.clientY,z(t)}}(e)},!1),s.addEventListener("mousedown",function(e){return(t=e).preventDefault(),T=!0,N=t.clientX,void t.clientY;var t},!1),s.addEventListener("mouseup",function(e){return e.preventDefault(),T=!1,void(C=!1)},!1),s.addEventListener("mousewheel",function(e){return function(e){if(e.path[0]===s){var t=e.wheelDeltaY/3;z(t)}}(e)},!1),s.addEventListener("touchmove",function(e){return function(e){var t=e.targetTouches[0].pageX-F;F=e.targetTouches[0].pageX,z(t)}(e)},!1),s.addEventListener("touchstart",function(e){F=e.targetTouches[0].pageX},!1),window.addEventListener("resize",function(){r.setSize(s.clientWidth,s.clientHeight),i.aspect=s.clientWidth/s.clientHeight,i.updateProjectionMatrix()},!1);var G=function(t){S.current.visible=!1,!0;var n=e.neighbors.get(t).bearing*Math.PI/180,a=-e.neighbors.get(t).bearing*Math.PI/180;i.rotation.y>0&&(a=2*Math.PI-e.neighbors.get(t).bearing*Math.PI/180),i.rotation.y-a>=Math.PI&&i.rotation.y-a<2*Math.PI?a+=2*Math.PI:i.rotation.y-a<=-Math.PI&&i.rotation.y-a<-2*Math.PI&&(a=-2*Math.PI+a);var o={at:i.rotation.y},r={at:a},s=new Oe.Tween(o).to(r,500).easing(Oe.Easing.Quadratic.InOut);s.onUpdate(function(){i.rotation.y=o.at}),s.onComplete(function(){i.rotation.y=-e.neighbors.get(t).bearing*Math.PI/180,e.panoPageStore.updatePegmanOffset(i.rotation.y)});var l={zVal:i.position.z,xVal:i.position.x,fovValue:i.fov,opacity:e.cylindermaterial.opacity},u={zVal:-13*Math.cos(n),xVal:13*Math.sin(n),fovValue:65,opacity:.1},p=new Oe.Tween(l).to(u,500);p.onUpdate(function(){i.position.z=l.zVal,i.position.x=l.xVal,i.fov=l.fovValue,i.updateProjectionMatrix(),e.cylindermaterial.opacity=l.opacity}),p.onComplete(Object(O.a)(P.a.mark(function t(){return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i.position.set(0,0,0),i.fov=40,i.updateProjectionMatrix(),e.cylindermaterial.map=e.texture,e.cylindermesh.rotation.y=e.currLoc.calibration,e.cylindermaterial.transparent=!1,e.cylindermaterial.opacity=1,c.remove(e.tempcylindermesh),e.tempcylindermesh.geometry.dispose(),e.tempcylindermesh.material.dispose(),e.tempcylindermesh=void 0,e.tempcylindergeometry.scale(-1,1,1),!1,S.current.visible=!0,t.next=16,e.setNeighbors().then(e.RenderArrows);case 16:case"end":return t.stop()}},t)}))),s.chain(p),e.cylindermaterial.transparent=!0,s.start()};c.add(this.cylindermesh);var U=function(){var t=Object(O.a)(P.a.mark(function t(a){return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.panoIdChangeReactionDisposer(),e.currLoc=e.neighbors.get(a).location,e.texture=e.loader.load(n(50)("./".concat(e.currLoc.fname)),function(){e.tempcylindermaterial=new Z.MeshBasicMaterial({map:e.texture,side:Z.DoubleSide}),e.tempcylindermesh=new Z.Mesh(e.tempcylindergeometry,e.tempcylindermaterial),e.tempcylindergeometry.scale(-1,1,1),e.tempcylindermesh.rotation.y=e.currLoc.calibration,c.add(e.tempcylindermesh),G(a);var t=e.currLoc,n=t.coord,o=t.cameraY,r=t.id;e.panoPageStore.updateValues(n.lat,n.lng,o,r),e.setPanoPageStoreIDChangeReaction()},void 0,function(e){console.error(e)});case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();this.cone0&&this.cone1&&this.cone2&&this.RenderArrows();var J=Object(a.useRef)(),H=Object(a.useRef)(),W=Object(a.useRef)(),X=[new Z.Vector3(0,1,0),new Z.Vector3(-.6,-1,0),new Z.Vector3(0,-.5,0),new Z.Vector3(.6,-1,0)];function K(e,t){var n=!0,a=!1,o=void 0;try{for(var r,i=e[Symbol.iterator]();!(n=(r=i.next()).done);n=!0){r.value.material.opacity=t}}catch(c){a=!0,o=c}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}}W.current&&(W.current.vertices=X,W.current.faces.push(new Z.Face3(0,1,2)),W.current.faces.push(new Z.Face3(0,2,3)),W.current.computeFaceNormals(),W.current.scale(.3,.3,.3));var Q=Object(a.useRef)();return Q.current&&Q.current.geometry.scale(2,2,2),Object(_.b)(function(){Oe.update(),J.current.position.set(-3*Math.sin(i.rotation.y),-.9,-3*Math.cos(i.rotation.y)),H.current.position.set(-3*Math.sin(i.rotation.y-.4),-.8,-3*Math.cos(i.rotation.y-.4)),H.current.rotation.y=i.rotation.y,H.current.rotation.z=-i.rotation.y,function(){if(S.current){for(var t=[e.cone0,e.cone1,e.cone2],n=new Map,a=0;a<t.length;a++)t[a].parent.visible&&n.set(Y(t[a],a),t[a]);var o=Math.min.apply(Math,Object(q.a)(n.keys()));S.current.rotation.z=n.get(o).rotation.z,e.mouseSelectedArrowMesh=n.get(o)}}()}),o.a.createElement(o.a.Fragment,null,o.a.createElement("group",{ref:J,scale:[.2,.2,.2]},o.a.createElement("group",{onPointerOver:function(t){K(t.object.children,.9),e.toggleCursor(!0)},onPointerOut:function(t){K(t.object.children,.65),e.toggleCursor(!1)},onClick:function(){U(e.n0.location.id)},ref:v},o.a.createElement("mesh",{userData:{neighbor:0},ref:p,geometry:u.hitbox},o.a.createElement("meshBasicMaterial",{attach:"material",color:"blue",opacity:.5,transparent:!0,visible:!1})),o.a.createElement("mesh",{geometry:u.geometry,ref:g},o.a.createElement("meshBasicMaterial",{attach:"material",color:"white",opacity:.65,transparent:!0}))),o.a.createElement("group",{onPointerOver:function(t){K(t.object.children,.9),e.toggleCursor(!0)},onPointerOut:function(t){K(t.object.children,.65),e.toggleCursor(!1)},onClick:function(){U(e.n1.location.id)},ref:y},o.a.createElement("mesh",{userData:{neighbor:1},ref:d,geometry:u.hitbox},o.a.createElement("meshBasicMaterial",{attach:"material",color:"blue",opacity:.5,transparent:!0,visible:!1})),o.a.createElement("mesh",{geometry:u.geometry,ref:f},o.a.createElement("meshBasicMaterial",{attach:"material",color:"white",opacity:.65,transparent:!0}))),o.a.createElement("group",{onClick:function(){U(e.n2.location.id)},onPointerOver:function(t){K(t.object.children,.9),e.toggleCursor(!0)},onPointerOut:function(t){K(t.object.children,.65),e.toggleCursor(!1)},ref:k},o.a.createElement("mesh",{userData:{neighbor:2},ref:m,geometry:u.hitbox},o.a.createElement("meshBasicMaterial",{attach:"material",color:"blue",opacity:.5,transparent:!0,visible:!1})),o.a.createElement("mesh",{geometry:u.geometry,ref:b},o.a.createElement("meshBasicMaterial",{attach:"material",color:"white",opacity:.65,transparent:!0})))),o.a.createElement("group",{onPointerOver:function(t){K(t.object.children,.8),e.toggleCursor(!0)},onPointerOut:function(t){K(t.object.children,.5),e.toggleCursor(!1)},ref:H,position:[0,0,-3],scale:[.3,.3,.3],visible:!1},o.a.createElement("mesh",{geometry:new Z.CircleGeometry(.4,100,0),ref:h},o.a.createElement("meshBasicMaterial",{attach:"material",color:"white",opacity:.5,transparent:!0})),o.a.createElement("mesh",{position:[0,.03,.01]},o.a.createElement("geometry",{attach:"geometry",ref:W}),o.a.createElement("meshBasicMaterial",{attach:"material",color:"red",opacity:.5,transparent:!0}))),o.a.createElement("group",{ref:S,rotation:[-1.5708,0,0],onPointerUp:function(){C||function(){var t=[e.n0,e.n1,e.n2][e.mouseSelectedArrowMesh.userData.neighbor].location.id;U(t)}()}},o.a.createElement("mesh",{geometry:M.geometry,position:[0,.05,.001],scale:[.2,.12,.2]},o.a.createElement("meshBasicMaterial",{attach:"material",color:"grey",opacity:.7,transparent:!0})),o.a.createElement("mesh",{geometry:new Z.CircleGeometry(.4,100,0)},o.a.createElement("meshBasicMaterial",{attach:"material",color:"white",opacity:.7,transparent:!0}))))}},{key:"render",value:function(){return this.state.isLoading?o.a.createElement("div",{className:"spinner-container"},o.a.createElement(Ae,{width:100,height:100})):o.a.createElement("div",{className:"Pano-container"},o.a.createElement("div",{className:"Pano-canvas",style:this.canvasStyle},o.a.createElement(_.a,null,o.a.createElement(this.RenderPano,null))),o.a.createElement("div",null,o.a.createElement(fe,{panoPageStore:this.panoPageStore})),o.a.createElement("div",null,o.a.createElement(Pe,{panoPageStore:this.panoPageStore})))}},{key:"panoId",get:function(){return this.props.match.params.id||"20190724143833"}}]),t}(a.Component),je=Object(m.f)(ke),Ee=(n(154),[{path:"/maps/boston",title:"Boston"},{path:"/maps/concord",title:"Concord"}]),Me=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).gmapComponent=void 0,n.panoComponent=void 0,n.state={renderPano:!0},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(d.a,null,o.a.createElement(y,null,o.a.createElement(x,null,Ee.map(function(e){return o.a.createElement(d.b,{to:e.path,key:e.path,activeClassName:"ir-nav-item__active",className:"ir-nav-item"},e.title)})),o.a.createElement(w,null,o.a.createElement(m.b,{path:"/maps/:region"},o.a.createElement(K,null),o.a.createElement(m.b,{path:"/viewPano/:id",component:function(t){return e.state.renderPano?o.a.createElement(je,t):null}})),o.a.createElement(m.a,{exact:!0,from:"/",to:"/maps/center"}),o.a.createElement(m.a,{exact:!0,from:"/maps",to:"/maps/center"}),o.a.createElement(m.a,{exact:!0,from:"/maps/",to:"/maps/center"}))))}}]),t}(a.Component);i.a.render(o.a.createElement(Me,null),document.getElementById("interface"))}]),[[74,1,2]]]);
//# sourceMappingURL=main.9ff3cfe4.chunk.js.map