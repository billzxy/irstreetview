(window.webpackJsonp=window.webpackJsonp||[]).push([[0],Array(33).concat([function(e){e.exports=[{id:"20190724143458",filename:"pano-20190724143458-mx.png",coord:{lat:42.36000896,lng:-71.05425626},calibration:2.1959999999999638,neighborhood:"quincy"},{id:"20190724143833",filename:"pano-20190724143833-mx.png",coord:{lat:42.36000888,lng:-71.05416259},calibration:2.6039999999999637,neighborhood:"quincy"},{id:"20190724145944",filename:"pano-20190724145944-mx.png",coord:{lat:42.36014171,lng:-71.0525956},calibration:-2.368000000000113,neighborhood:"atlave"},{id:"20190724151238",filename:"pano-20190724151238-mx.png",coord:{lat:42.35946,lng:-71.05190878},calibration:-2.872000000000005,neighborhood:"atlave"},{id:"20190724151553",filename:"pano-20190724151553-mx.png",coord:{lat:42.35901057,lng:-71.05173236},calibration:-.5760000000000074,neighborhood:"atlave"},{id:"20190724150711",filename:"pano-20190724150711-mx.png",coord:{lat:42.35976055,lng:-71.05235965},calibration:-1.352814692820381,neighborhood:"atlave"},{id:"20190925112226",filename:"pano-20190925112226-mx.png",calibration:-2.9,neighborhood:["caa","cab"],coord:{lat:42.45954294,lng:-71.35375977}},{id:"20190925112242",filename:"pano-20190925112242-mx.png",calibration:-2.252,neighborhood:"cab",coord:{lat:42.45956467,lng:-71.35345682}},{id:"20190925113249",filename:"pano-20190925113249-mx.png",calibration:-2.98,neighborhood:"caa",coord:{lat:42.45957315,lng:-71.35418699}},{id:"20190925112410",filename:"pano-20190925112410-mx.png",calibration:-2.444,neighborhood:"caa",coord:{lat:42.45966985,lng:-71.35391209}},{id:"20190925111418",filename:"pano-20190925111418-mx.png",calibration:-2.82,neighborhood:"cdt",coord:{lat:42.45969867,lng:-71.35140942}},{id:"20190925112757",filename:"pano-20190925112757-mx.png",calibration:-2.17,neighborhood:"caa",coord:{lat:42.45996776,lng:-71.35447809}},{id:"20190925110216",filename:"pano-20190925110216-mx.png",calibration:-1.7,neighborhood:"cdt",coord:{lat:42.45950405,lng:-71.35144528}},{id:"20190925112004",filename:"pano-20190925112004-mx.png",calibration:-2.91,neighborhood:"cab",coord:{lat:42.45927407,lng:-71.35335518}},{id:"20190925113346",filename:"pano-20190925113346-mx.png",calibration:-2.14,neighborhood:"caa",coord:{lat:42.45954963,lng:-71.354371}},{id:"20190925110449",filename:"pano-20190925110449-mx.png",calibration:-1.35,neighborhood:"cdt",coord:{lat:42.45962005,lng:-71.35099675}},{id:"20190925112944",filename:"pano-20190925112944-mx.png",calibration:-2.15,neighborhood:"caa",coord:{lat:42.45980487,lng:-71.35493824}},{id:"20190925111251",filename:"pano-20190925111251-mx.png",calibration:-1.82,neighborhood:"cdt",coord:{lat:42.45976744,lng:-71.35109601}},{id:"20190925111017",filename:"pano-20190925111017-mx.png",calibration:-3.38,neighborhood:"cdt",coord:{lat:42.45994194,lng:-71.35046685}},{id:"20190925112929",filename:"pano-20190925112929-mx.png",calibration:-2.77,neighborhood:"caa",coord:{lat:42.45967437,lng:-71.35489279}},{id:"20190925110659",filename:"pano-20190925110659-mx.png",calibration:-2.86,neighborhood:"cdt",coord:{lat:42.45980818,lng:-71.35042955}},{id:"20190925112754",filename:"pano-20190925112754-mx.png",calibration:-3.01,neighborhood:"caa",coord:{lat:42.4598957,lng:-71.35475797}},{id:"20190925112418",filename:"pano-20190925112418-mx.png",calibration:-2.94,neighborhood:"caa",coord:{lat:42.45977151,lng:-71.35404583}},{id:"20190925111907",filename:"pano-20190925111907-mx.png",calibration:2.82,neighborhood:"cab",coord:{lat:42.4594054,lng:-71.35342462}},{id:"20190925111628",filename:"pano-20190925111628-mx.png",calibration:-3.05,neighborhood:"cdt",coord:{lat:42.45958235,lng:-71.35173774}},{id:"20190925113109",filename:"pano-20190925113109-mx.png",calibration:-2.95,neighborhood:"caa",coord:{lat:42.45951864,lng:-71.35461781}}]},,,,,,,,,,,,,,,,function(e,t,n){var a={"./pano-20190724143458-mx.png":125,"./pano-20190724143833-mx.png":126,"./pano-20190724145944-mx.png":127,"./pano-20190724150711-mx.png":128,"./pano-20190724151238-mx.png":129,"./pano-20190724151553-mx.png":130,"./pano-20190925110216-mx.png":131,"./pano-20190925110449-mx.png":132,"./pano-20190925110659-mx.png":133,"./pano-20190925111017-mx.png":134,"./pano-20190925111251-mx.png":135,"./pano-20190925111418-mx.png":136,"./pano-20190925111628-mx.png":137,"./pano-20190925111907-mx.png":138,"./pano-20190925112004-mx.png":139,"./pano-20190925112226-mx.png":140,"./pano-20190925112242-mx.png":141,"./pano-20190925112410-mx.png":142,"./pano-20190925112418-mx.png":143,"./pano-20190925112754-mx.png":144,"./pano-20190925112757-mx.png":145,"./pano-20190925112929-mx.png":146,"./pano-20190925112944-mx.png":147,"./pano-20190925113109-mx.png":148,"./pano-20190925113249-mx.png":149,"./pano-20190925113346-mx.png":150};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=49},,,function(e){e.exports={quincy:{type:"linear",map:["20190724143458","20190724143833"]},cdt:{type:"irregular",map:{20190925111628:["20190925111418","20190925110216"],20190925110216:["20190925111628","20190925111418","20190925110449"],20190925111418:["20190925111628","20190925110216","20190925111251"],20190925111251:["20190925111418","20190925110449","20190925111017"],20190925110449:["20190925110216","20190925111251","20190925110659"],20190925110659:["20190925110449","20190925111017"],20190925111017:["20190925110659","20190925111251"]}},caa:{type:"circular",map:["20190925112410","20190925112226","20190925113249","20190925113346","20190925113109","20190925112929","20190925112944","20190925112754","20190925112757","20190925112418"]},cab:{type:"linear",map:["20190925112226","20190925112242","20190925111907","20190925112004"]},atlave:{type:"linear",map:["20190724151553","20190724151238","20190724150711","20190724145944"]}}},,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(154)},,,,function(e,t,n){},,,,,,,,,,,,,,,,,,,,function(e,t){e.exports="data:image/png;base64,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"},,function(e,t,n){},,function(e,t,n){e.exports=n.p+"static/media/rotating.4957277e.png"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAMAAACecocUAAAACXBIWXMAAAAcAAAAHAAPAbmPAAAAIVBMVEUAAABVnbVRnbVRnbVdpb2l4fpVnb1dqcFVnblVobmFyeFl3ybiAAAAC3RSTlMAtb18tGwapUy9gIWpoGAAAABESURBVHja7f3HAcQwDMMAkFSzvf/A8V2aMgRfENRWAJBG0XITBuXl4tiWc0XEmkyYfrgLGehxxgnVxaWP7/P9Tr/f/h6CtgH6SIBB6wAAAABJRU5ErkJggg=="},,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"static/media/pano-20190724143458-mx.072de3d6.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190724143833-mx.0732614b.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190724145944-mx.0c7531e1.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190724150711-mx.f67813cf.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190724151238-mx.3f9e7726.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190724151553-mx.c1e8bceb.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925110216-mx.15966b2a.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925110449-mx.5b18415f.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925110659-mx.a9cd19bd.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925111017-mx.d1eacec2.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925111251-mx.3a2748ab.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925111418-mx.80a5715d.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925111628-mx.c890f6ed.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925111907-mx.f5896ac6.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925112004-mx.7f51a340.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925112226-mx.a1e5bd11.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925112242-mx.4589189c.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925112410-mx.5e375cce.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925112418-mx.f8ad88bb.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925112754-mx.e2a0bfca.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925112757-mx.702d7268.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925112929-mx.dad914bf.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925112944-mx.fdd79d67.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925113109-mx.1c1e94e1.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925113249-mx.798912fc.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925113346-mx.0775a445.png"},,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(22),i=n.n(o),c=(n(78),n(6)),s=n(7),l=n(20),u=n(18),p=n(19),d=n(29),m=n(23),h=n(11),g=n(12);function f(){var e=Object(h.a)(["\n\tflex: 1;\n\tpadding: 2px;\n\tpadding-top: ","px;\n"]);return f=function(){return e},e}function b(){var e=Object(h.a)(["\n\tposition: fixed;\n\tz-index: 999;\n\ttop: 10px;\n\tright: 10px;\n\tpadding: 12px;\n\theight: 20px;\n\tdisplay: flex;\n\tjustify-content: flex-start;\n\talign-items: center;\n\tbackground-color: #f8f8f8;\n    box-shadow: 2px 2px gray;\n\tcursor: pointer;\n\t& .ir-nav-item {\n\t\tmargin-right: 0.5rem;\n\t\tmargin-left: 0.5rem;\n\t\ttext-decoration: none;\n\t\tcolor: rgba(0, 0, 0, 0.5);\n\t}\n\n\t& .ir-nav-item__active {\n\t\tcolor: #000000;\n\t}\n"]);return b=function(){return e},e}function v(){var e=Object(h.a)(["\n\twidth: 100vw;\n\theight: 100vh;\n\tdisplay: flex;\n\tflex-direction: column;\n"]);return v=function(){return e},e}var y=g.a.div(v()),x=g.a.div(b()),A=g.a.div(f(),2),w=n(3),k=n.n(w),P=n(8),O=n(24),j=n(33),S=n(52);function E(e,t,n){if(!n)for(var a=0;a<e.length;a++){var r=[],o=!0,i=!1,c=void 0;try{for(var s,l=t[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value;r.push(e[a][u])}}catch(v){i=!0,c=v}finally{try{o||null==l.return||l.return()}finally{if(i)throw c}}return r}for(a=0;a<e.length;a++)if(e[a].id===n){if(0===t.length)return e[a];var p={},d=!0,m=!1,h=void 0;try{for(var g,f=t[Symbol.iterator]();!(d=(g=f.next()).done);d=!0){var b=g.value;p[b]=e[a][b]}}catch(v){m=!0,h=v}finally{try{d||null==f.return||f.return()}finally{if(m)throw h}}return p}}function M(e,t){if(Array.isArray(t)){var n=[],a=!0,r=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(a=(i=c.next()).done);a=!0){var s=i.value,l=B(e,S[s]);Array.prototype.push.apply(n,l)}}catch(u){r=!0,o=u}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}return n}return B(e,S[t])}function B(e,t){if(t.map.length<2)return[];switch(t.type){case"linear":for(var n=0;n<t.map.length;n++)if(e===t.map[n])return 0===n?[t.map[1]]:n===t.map.length-1?[t.map[t.map.length-2]]:[t.map[n-1],t.map[n+1]];break;case"circular":for(n=0;n<t.map.length;n++)if(e===t.map[n])return 0===n?[t.map[1],t.map[t.map.length-1]]:n===t.map.length-1?[t.map[t.map.length-2],t.map[0]]:[t.map[n-1],t.map[n+1]];break;case"irregular":return t.map[e]}}var C={getPanoFileNameById:function(e){return Promise.resolve({data:{data:E(j,["filename"],e)}})},getPanoCoordById:function(e){return Promise.resolve({data:{data:E(j,["coord"],e)}})},getAllPanoIdAndCoord:function(){return Promise.resolve({data:{data:j}})},getPanoAllAttrById:function(e){return Promise.resolve({data:{data:E(j,[],e)}})},getNeighborsById:function(e,t){return Promise.resolve({data:{data:M(e,t)}})}};function I(){var e=Object(h.a)(["\n  width: 100%;\n  height: 100%;\n  display: ",";\n\n  & > div {\n    width: 100%;\n    height: 100%;\n  }\n"]);return I=function(){return e},e}function L(){var e=Object(h.a)(["\n  width: 100%;\n  height: 100%;\n  position: relative !important;\n"]);return L=function(){return e},e}var D,R,T,V,Y,N,F=n(97),z=Object(g.a)(O.Map)(L()),U=g.a.div(I(),function(e){var t=e.show;return void 0!==t&&t?"block":"none"}),G={boston:{lat:42.36,lng:-71.053},concord:{lat:42.45955,lng:-71.3525},center:{lat:42.4,lng:-71.2}},J=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).bounds=new a.props.google.maps.LatLngBounds,a.Clusterer=function(e){var t=e.map,r=e.google;if(!t)return null;new F(t,a.addMarkers(t,r),{styles:[{width:53,height:52,url:n(98),textColor:"white"}],gridSize:20,minimumClusterSize:6});return null},a.state={coords:[]},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;(function(){var t=Object(P.a)(k.a.mark(function t(){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.getAllPanoIdAndCoord().then(function(t){for(var n=[],a=t.data.data,r=0;r<a.length;r++)n.push({id:a[r].id,lat:a[r].coord.lat,lng:a[r].coord.lng});e.setState({coords:n})});case 2:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}})()()}},{key:"setBounds",value:function(){var e=this.state.coords;if(e)for(var t=0;t<e.length;t++){var n=e[t];this.bounds.extend(new this.props.google.maps.LatLng({lat:n.lat,lng:n.lng}))}}},{key:"addMarkers",value:function(e,t){var n=this,a=this.state.coords;if(a)return a.map(function(a,r){var o=new t.maps.Marker({position:{lat:a.lat,lng:a.lng},map:e,title:a.id});return t.maps.event.addListener(o,"click",function(){n.gotoPano(o.title)}),o})}},{key:"gotoPano",value:function(e){this.props.history.push("/viewPano/".concat(e))}},{key:"goBack",value:function(){this.props.history.goBack(),console.log("go back")}},{key:"render",value:function(){return r.a.createElement(z,{ref:this.props.onMapMounted,google:this.props.google,zoom:11,center:G[this.region],initialCenter:G.center,bounds:this.bounds},r.a.createElement(this.Clusterer,null))}},{key:"region",get:function(){return this.props.match?this.props.match.params.region:"boston"}}]),t}(a.Component),H=Object(O.GoogleApiWrapper)({apiKey:"".concat("AIzaSyAwmnfBgRgSFnydLrrkAJ2gYBfarvA7Fu4")})(J),W=Object(m.f)(function(e){return Object(a.useEffect)(function(){return function(){console.log("GMap...dying")}},[]),r.a.createElement(U,{show:!!e.match},r.a.createElement(H,e))}),X=n(21),K=n(41),q=n(1),Q=n(43),Z=n(68),_=(n(100),n(34)),$=n(35),ee=(n(101),n(2)),te=n(73);function ne(){var e=Object(h.a)(["\n\twidth: 100%;\n\theight: 100%;\n\n\t& > div {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n"]);return ne=function(){return e},e}function ae(){var e=Object(h.a)(["\n\twidth: 100% !important;\n\theight: 100% !important;\n\tposition: relative !important;\n"]);return ae=function(){return e},e}var re,oe,ie=Object(g.a)(O.Map)(ae()),ce=g.a.div(ne()),se=function(){(re=document.getElementsByClassName("Minimap")[0]).addEventListener("mouseover",function(e){return function(e){e.preventDefault(),re.style.width="250px",re.style.height="200px"}(e)},!1),re.addEventListener("mouseout",function(e){return function(e){e.preventDefault(),re.style.width="200px",re.style.height="100px"}(e)},!1),(oe=document.getElementsByClassName("InfoBox")[0]).addEventListener("mouseover",function(e){return function(e){e.preventDefault(),oe.style.opacity="0.75"}(e)},!1),oe.addEventListener("mouseout",function(e){return function(e){e.preventDefault(),oe.style.opacity="0.5"}(e)},!1),oe.addEventListener("mousedown",function(e){return function(e){e.preventDefault(),window.history.back()}(e)},!1)};var le=(D=function(){function e(t,n,a,r){Object(c.a)(this,e),Object(_.a)(this,"lng",R,this),Object(_.a)(this,"lat",T,this),Object(_.a)(this,"id",V,this),Object(_.a)(this,"pmanOffsetY",Y,this),this.lng=n,this.lat=t,this.id=r,this.pmanOffsetY=this.setPegmanRotationOffsetYFromCameraY(a)}return Object(s.a)(e,[{key:"updateValues",value:function(e,t,n,a){this.lng=t,this.lat=e,this.id=a,this.pmanOffsetY=this.setPegmanRotationOffsetYFromCameraY(n)}},{key:"updatePegmanOffset",value:function(e){this.pmanOffsetY=this.setPegmanRotationOffsetYFromCameraY(e)}},{key:"setPegmanRotationOffsetYFromCameraY",value:function(e){var t=Math.ceil(180*-e/Math.PI);return t<0&&(t=360+t),9+60*Math.floor(t/22.5)}}]),e}(),R=Object($.a)(D.prototype,"lng",[ee.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=Object($.a)(D.prototype,"lat",[ee.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=Object($.a)(D.prototype,"id",[ee.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=Object($.a)(D.prototype,"pmanOffsetY",[ee.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D),ue=function(e){var t=e.id,a=e.lat,o=e.lng,i=e.pmanOffsetY,c=e.google,s=e.map,l=e.mapCenter,u=new c.maps.Point(8,9);i&&(u=new c.maps.Point(8,i));var p={url:n(102),size:new c.maps.Size(44,49),origin:u,anchor:new c.maps.Point(22,34),custom:!0};return r.a.createElement(O.Marker,{lid:t,position:{lat:a,lng:o},icon:p,key:t,google:c,map:s,mapCenter:l,zIndex:100})},pe=Object(te.a)(N=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).pStore=void 0,a.bounds=new a.props.google.maps.LatLngBounds,a.dotIcon={url:n(103),size:new a.props.google.maps.Size(11,11),origin:new a.props.google.maps.Point(0,0),anchor:new a.props.google.maps.Point(5.5,5.5)},a.state={showComp:!1},a.pStore=a.props.panoPageStore,a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;(function(){var t=Object(P.a)(k.a.mark(function t(){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.getAllPanoIdAndCoord().then(function(t){for(var n=[],a=t.data.data,r=0;r<a.length;r++)n.push({id:a[r].id,lat:a[r].coord.lat,lng:a[r].coord.lng});e.setState({coords:n,showComp:!0})});case 2:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}})()()}},{key:"showComponent",value:function(e){!0!==e&&!1!==e||this.setState({showComp:e})}},{key:"setBounds",value:function(){for(var e=0;e<this.state.coords.length;e++){var t=this.state.coords[e];this.bounds.extend(new this.props.google.maps.LatLng({lat:t.lat,lng:t.lng}))}}},{key:"addMarkers",value:function(){var e,t=this;this.setBounds();var n=1;return this.state.coords.map(function(a,o){if(t.state.coords[o].id!==t.pStore.id)return e=t.dotIcon,n++,r.a.createElement(O.Marker,{lid:a.id,position:{lat:a.lat,lng:a.lng},onClick:function(e){return t.gotoPano(e.lid)},icon:e,key:a.id,zIndex:n})})}},{key:"gotoPano",value:function(e){this.pStore.id=e}},{key:"render",value:function(){return this.state.showComp?r.a.createElement(r.a.Fragment,null,r.a.createElement(ie,{ref:this.props.onMapMounted,google:this.props.google,zoom:17,center:{lat:this.pStore.lat,lng:this.pStore.lng},initialCenter:{lat:this.pStore.lat,lng:this.pStore.lng},bounds:this.bounds,onReady:se,streetViewControl:!1,fullscreenControl:!1,mapTypeControl:!1,rotateControl:!1},r.a.createElement(ue,{id:this.pStore.id,lat:this.pStore.lat,lng:this.pStore.lng,pmanOffsetY:this.pStore.pmanOffsetY}),this.addMarkers())):null}}]),t}(a.Component))||N,de=Object(O.GoogleApiWrapper)({apiKey:"".concat("AIzaSyAwmnfBgRgSFnydLrrkAJ2gYBfarvA7Fu4")})(Object(m.f)(pe)),me=function(e){function t(e){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"backBox",value:function(){return r.a.createElement("div",null,r.a.createElement("span",null," \u2190 "))}},{key:"textBox",value:function(){return r.a.createElement("div",null)}},{key:"render",value:function(){return r.a.createElement(this.backBox,null)}}]),t}(a.Component),he=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"Minimap"},r.a.createElement(ce,null,r.a.createElement(de,e))),r.a.createElement("div",{className:"InfoBox"},r.a.createElement(me,null)))},ge=n(55),fe=function(){function e(t){var n=this;Object(c.a)(this,e),this.coord={lat:0,lng:0},this.calibration=0,this.id=void 0,this.fname="",this.neighborhood="",this.neighborArr=void 0,this.cameraY=void 0,this.setAllAttr=Object(P.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getPanoAllAttrById(n.id).then(function(e){n.fname=e.data.data.filename,n.coord.lat=e.data.data.coord.lat,n.coord.lng=e.data.data.coord.lng,n.calibration=e.data.data.calibration,n.neighborhood=e.data.data.neighborhood});case 2:case"end":return e.stop()}},e)})),this.getNeighborIds=Object(P.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getNeighborsById(n.id,n.neighborhood).then(function(e){n.neighborArr=e.data.data});case 2:case"end":return e.stop()}},e)})),this.updateCalibration=function(){var e=Object(P.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:({calibration:-t.rotation.y}),alert("Update Calibration is disabled at this moment!");case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.id=t}return Object(s.a)(e,[{key:"getDistanceTo",value:function(e){return ge.getDistance(this.coord,e.coord)}},{key:"getDistanceToNeighbors",value:function(e){return e.map(this.getDistanceTo)}},{key:"getBearingTo",value:function(e){return ge.getRhumbLineBearing(this.coord,e.coord)}},{key:"getBearingToNeighbors",value:function(e){return e.map(this.getBearingTo)}}]),e}(),be=function(){function e(){Object(c.a)(this,e),this.mesh=void 0,this.material=void 0,this.geometry=void 0,this.id=void 0,this.geometry=new q.Geometry,this.geometry.vertices.push(new q.Vector3(0,0,0),new q.Vector3(1.5,-2,0),new q.Vector3(1.5,-.5,0),new q.Vector3(0,1.5,0),new q.Vector3(-1.5,-.5,0),new q.Vector3(-1.5,-2,0)),this.geometry.faces.push(new q.Face3(0,1,2),new q.Face3(0,2,3),new q.Face3(4,0,3),new q.Face3(5,0,4)),this.material=new q.MeshBasicMaterial({color:"white"}),this.mesh=new q.Mesh(this.geometry,this.material)}return Object(s.a)(e,[{key:"onClickHandler",value:function(){}}]),e}();function ve(){var e=Object(h.a)(["\n\t&,\n\t&:after {\n\t\tborder-radius: 50%;\n\t\twidth: ","px;\n\t\theight: ","px;\n\t}\n\t& {\n\t\tmargin: 60px auto;\n\t\tfont-size: 10px;\n\t\tposition: relative;\n\t\ttext-indent: -9999em;\n\t\tborder-top: 1.1em solid rgba(0, 0, 0, 0.1);\n\t\tborder-right: 1.1em solid rgba(0, 0, 0, 0.1);\n\t\tborder-bottom: 1.1em solid rgba(0, 0, 0, 0.1);\n\t\tborder-left: 1.1em solid ",";\n\t\t-webkit-transform: translateZ(0);\n\t\t-ms-transform: translateZ(0);\n\t\ttransform: translateZ(0);\n\t\t-webkit-animation: load8 1.1s infinite linear;\n\t\tanimation: load8 1.1s infinite linear;\n\t}\n\t@-webkit-keyframes load8 {\n\t\t0% {\n\t\t\t-webkit-transform: rotate(0deg);\n\t\t\ttransform: rotate(0deg);\n\t\t}\n\t\t100% {\n\t\t\t-webkit-transform: rotate(360deg);\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n\t@keyframes load8 {\n\t\t0% {\n\t\t\t-webkit-transform: rotate(0deg);\n\t\t\ttransform: rotate(0deg);\n\t\t}\n\t\t100% {\n\t\t\t-webkit-transform: rotate(360deg);\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n"]);return ve=function(){return e},e}var ye=g.a.div(ve(),function(e){var t=e.width;return void 0===t?"48":t},function(e){var t=e.width;return void 0===t?"48":t},function(e){var t=e.color;return void 0===t?"#ea6c2f":t}),xe=n(124),Ae=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).currLoc=void 0,a.neighbors=void 0,a.panoPageStore=void 0,a.panoIdChangeReactionDisposer=void 0,a.canvasStyle={cursor:"default"},a.cylindergeometry=new q.CylinderBufferGeometry(20,20,15,100,1,!0),a.cylindermaterial=void 0,a.cylindermesh=void 0,a.texture=void 0,a.loader=new q.TextureLoader,a.lines=[],a.tempcylindergeometry=new q.CylinderBufferGeometry(21,21,15,100,1,!0),a.tempcylindermaterial=void 0,a.tempcylindermesh=void 0,a.threeCamera=void 0,a.threeScene=void 0,a.cone0=void 0,a.cone1=void 0,a.cone2=void 0,a.pinSphereGeometry=new q.SphereGeometry(.5,16,16),a.pinNeedleGeometry=new q.CylinderGeometry(.075,.025,3,10,1,!1),a.pin0=void 0,a.pin1=void 0,a.pin2=void 0,a.n0=void 0,a.n1=void 0,a.n2=void 0,a.mouseSelectedArrowMesh=void 0,a.teleportToScene=function(){var e=Object(P.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.currLoc=new fe(t),e.next=3,a.currLoc.setAllAttr().then(function(){a.texture=a.loader.load(n(49)("./".concat(a.currLoc.fname)),function(){a.tempcylindermaterial=new q.MeshBasicMaterial({map:a.texture,side:q.DoubleSide}),a.tempcylindermesh=new q.Mesh(a.tempcylindergeometry,a.tempcylindermaterial),a.tempcylindergeometry.scale(-1,1,1),a.tempcylindermesh.rotation.y=a.currLoc.calibration,a.threeScene.add(a.tempcylindermesh),a.animateTeleportationTextureFade();var e=a.currLoc,t=e.coord,n=e.cameraY,r=e.id;a.panoPageStore.updateValues(t.lat,t.lng,n,r)},void 0,function(e){console.error(e)})});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.animateTeleportationTextureFade=function(){var e={at:a.cylindermaterial.opacity},t=new xe.Tween(e).to({at:.1},500).easing(xe.Easing.Quadratic.InOut);t.onUpdate(function(){a.cylindermaterial.opacity=e.at}),t.onComplete(Object(P.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.threeCamera.rotation.y=0,a.threeCamera.fov=40,a.threeCamera.updateProjectionMatrix(),a.cylindermaterial.map=a.texture,a.cylindermesh.rotation.y=a.currLoc.calibration,a.cylindermaterial.transparent=!1,a.cylindermaterial.opacity=1,a.threeScene.remove(a.tempcylindermesh),a.tempcylindermesh.geometry.dispose(),a.tempcylindermesh.material.dispose(),a.tempcylindermesh=void 0,a.tempcylindergeometry.scale(-1,1,1),e.next=14,a.setNeighbors().then(a.RenderArrows);case 14:case"end":return e.stop()}},e)}))),a.cylindermaterial.transparent=!0,t.start()},a.RenderArrows=function(){var e=a.neighbors.keys();a.n0=a.neighbors.get(e.next().value),console.log(a.currLoc.id);a.cone0.position.z=-7.5*Math.cos(a.n0.bearing*Math.PI/180),a.cone0.position.x=7.5*Math.sin(a.n0.bearing*Math.PI/180),a.cone0.rotation.x=-1.5708,a.cone0.rotation.z=-a.n0.bearing*Math.PI/180,a.cone1.visible=!1,a.cone2.visible=!1,a.neighbors.size>1&&(a.n1=a.neighbors.get(e.next().value),a.cone1.visible=!0,a.cone1.position.z=-7.5*Math.cos(a.n1.bearing*Math.PI/180),a.cone1.position.x=7.5*Math.sin(a.n1.bearing*Math.PI/180),a.cone1.rotation.x=-1.5708,a.cone1.rotation.z=-a.n1.bearing*Math.PI/180),3===a.neighbors.size&&(a.n2=a.neighbors.get(e.next().value),a.cone2.visible=!0,a.cone2.position.z=-7.5*Math.cos(a.n2.bearing*Math.PI/180),a.cone2.position.x=7.5*Math.sin(a.n2.bearing*Math.PI/180),a.cone2.rotation.x=-1.5708,a.cone2.rotation.z=-a.n2.bearing*Math.PI/180)},a.state={isLoading:!0},a.RenderPano=a.RenderPano.bind(Object(K.a)(a)),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(Z.disableBodyScroll)(document.querySelector("#interface")),function(){var t=Object(P.a)(k.a.mark(function t(){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.currLoc=new fe(e.panoId),t.next=3,e.currLoc.setAllAttr().then(function(){e.loadTexture()});case 3:e.neighbors=new Map,e.setNeighbors();case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()()}},{key:"componentWillUnmount",value:function(){console.log("Unmount pano...")}},{key:"setNeighbors",value:function(){var e=Object(P.a)(k.a.mark(function e(){var t,n,a,r,o,i,c,s=this;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.neighbors.clear(),e.next=3,this.currLoc.getNeighborIds();case 3:if(0!==(t=this.currLoc.neighborArr).length){e.next=9;break}return console.log("No neighbors discorvered..."),e.abrupt("return");case 9:n=!0,a=!1,r=void 0,e.prev=12,o=k.a.mark(function e(){var t,n;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.value,n=new fe(t),e.next=4,n.setAllAttr().then(function(){s.addNeighbor(n)});case 4:case"end":return e.stop()}},e)}),i=t[Symbol.iterator]();case 15:if(n=(c=i.next()).done){e.next=20;break}return e.delegateYield(o(),"t0",17);case 17:n=!0,e.next=15;break;case 20:e.next=26;break;case 22:e.prev=22,e.t1=e.catch(12),a=!0,r=e.t1;case 26:e.prev=26,e.prev=27,n||null==i.return||i.return();case 29:if(e.prev=29,!a){e.next=32;break}throw r;case 32:return e.finish(29);case 33:return e.finish(26);case 34:case"end":return e.stop()}},e,this,[[12,22,26,34],[27,,29,33]])}));return function(){return e.apply(this,arguments)}}()},{key:"addNeighbor",value:function(e){this.neighbors.set(e.id,{location:e,distance:this.currLoc.getDistanceTo(e),bearing:this.currLoc.getBearingTo(e)})}},{key:"toggleCursor",value:function(e){this.canvasStyle=e?{cursor:"pointer"}:{cursor:"default"}}},{key:"setPanoPageStoreIDChangeReaction",value:function(){var e=this;this.panoIdChangeReactionDisposer=Object(ee.l)(function(){return e.panoPageStore.id},function(t,n){e.teleportToScene(t)})}},{key:"loadTexture",value:function(){var e=this;this.texture=this.loader.load(n(49)("./".concat(this.currLoc.fname)),function(){e.panoPageStore=new le(e.currLoc.coord.lat,e.currLoc.coord.lng,0,e.currLoc.id),e.setPanoPageStoreIDChangeReaction(),e.setState({isLoading:!1})},void 0,function(e){console.error(e)}),this.cylindermaterial=new q.MeshBasicMaterial({map:this.texture,side:q.DoubleSide}),this.cylindermesh=new q.Mesh(this.cylindergeometry,this.cylindermaterial),this.cylindergeometry.scale(-1,1,1),this.cylindermesh.rotation.y=this.currLoc.calibration}},{key:"CameraLookNorth",value:function(e){var t=this,n={at:e.rotation.y},a=new xe.Tween(n).to({at:0},750).easing(xe.Easing.Quadratic.InOut);a.onUpdate(function(){e.rotation.y=n.at}),a.onComplete(function(){e.rotation.y=0,t.panoPageStore.updatePegmanOffset(0)}),a.start()}},{key:"RenderPano",value:function(){var e=this,t=Object(Q.c)(),o=t.gl,i=t.camera,c=t.scene,s=t.canvas,l=t.raycaster;this.threeCamera=i,this.threeScene=c,i.fov=40,o.setSize(s.clientWidth,s.clientHeight),i.position.set(0,0,0),i.lookAt(0,0,0);var u=new be,p=Object(a.useRef)(),d=Object(a.useRef)(),m=Object(a.useRef)(),h=Object(a.useRef)();this.cone0=p.current,this.cone1=d.current,this.cone2=m.current;var g={x:0,y:0},f=new be,b=Object(a.useRef)(),v=!1,y=[],x=new q.PlaneGeometry(40,40),A=new q.MeshBasicMaterial({color:"grey",side:q.DoubleSide,opacity:0,transparent:!0}),w=new q.Mesh(x,A);if(w.rotation.set(-1.5708,0,0),w.position.set(0,-1,0),c.add(w),p.current&&d.current&&m.current&&h.current&&(y.push(p.current),y.push(d.current),y.push(m.current),y.push(h.current),y.push(w)),Object(a.useRef)().current){this.cone0.geometry.computeBoundingSphere();var O=this.cone0.geometry.boundingSphere.center,j=new q.Vector3(O.x,O.y,O.z);D.current.localToWorld(j)}var S=function(e){b.current.children[1].geometry.computeBoundingSphere();var t=b.current.children[1].geometry.boundingSphere.center,n=new q.Vector3(t.x,t.y,t.z);b.current.localToWorld(n),e.geometry.computeBoundingSphere();var a=e.geometry.boundingSphere.center,r=new q.Vector3(a.x,a.y,a.z);return e.localToWorld(r),n.distanceTo(r)},E=!1,M=0;var B=0;var C=function(t){v=!0,i.rotation.y+=t/1e3,i.rotation.y%=2*Math.PI,e.panoPageStore.updatePegmanOffset(i.rotation.y)};window.addEventListener("mousemove",function(e){if(b.current){e.preventDefault(),g.x=e.clientX/window.innerWidth*2-1,g.y=-e.clientY/window.innerHeight*2+1,l.setFromCamera(g,i);var t=l.intersectObjects(y);if(t.length>0){var n=t[0];1===t.length?(b.current.visible=!0,b.current.position.copy(n.point).add(new q.Vector3(0,.01,0))):b.current.visible=!1}}},!1),s.addEventListener("mousemove",function(e){return function(e){if(E){e.preventDefault();var t=e.clientX-M;e.clientY,M=e.clientX,e.clientY,C(t)}}(e)},!1),s.addEventListener("mousedown",function(e){return(t=e).preventDefault(),E=!0,M=t.clientX,void t.clientY;var t},!1),s.addEventListener("mouseup",function(e){return e.preventDefault(),E=!1,void(v=!1)},!1),s.addEventListener("mousewheel",function(e){return function(e){if(e.path[0]===s){var t=e.wheelDeltaY/3;C(t)}}(e)},!1),s.addEventListener("touchmove",function(e){return function(e){var t=e.targetTouches[0].pageX-B;B=e.targetTouches[0].pageX,C(t)}(e)},!1),s.addEventListener("touchstart",function(e){B=e.targetTouches[0].pageX},!1),window.addEventListener("resize",function(){o.setSize(s.clientWidth,s.clientHeight),i.aspect=s.clientWidth/s.clientHeight,i.updateProjectionMatrix()},!1);var I=function(t){b.current.visible=!1,!0;var n=e.neighbors.get(t).bearing*Math.PI/180,a=-e.neighbors.get(t).bearing*Math.PI/180;i.rotation.y>0&&(a=2*Math.PI-e.neighbors.get(t).bearing*Math.PI/180),i.rotation.y-a>=Math.PI&&i.rotation.y-a<2*Math.PI?a+=2*Math.PI:i.rotation.y-a<=-Math.PI&&i.rotation.y-a<-2*Math.PI&&(a=-2*Math.PI+a);var r={at:i.rotation.y},o={at:a},s=new xe.Tween(r).to(o,500).easing(xe.Easing.Quadratic.InOut);s.onUpdate(function(){i.rotation.y=r.at}),s.onComplete(function(){i.rotation.y=-e.neighbors.get(t).bearing*Math.PI/180,e.panoPageStore.updatePegmanOffset(i.rotation.y)});var l={zVal:i.position.z,xVal:i.position.x,fovValue:i.fov,opacity:e.cylindermaterial.opacity},u={zVal:-13*Math.cos(n),xVal:13*Math.sin(n),fovValue:65,opacity:.1},p=new xe.Tween(l).to(u,500);p.onUpdate(function(){i.position.z=l.zVal,i.position.x=l.xVal,i.fov=l.fovValue,i.updateProjectionMatrix(),e.cylindermaterial.opacity=l.opacity}),p.onComplete(Object(P.a)(k.a.mark(function t(){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i.position.set(0,0,0),i.fov=40,i.updateProjectionMatrix(),e.cylindermaterial.map=e.texture,e.cylindermesh.rotation.y=e.currLoc.calibration,e.cylindermaterial.transparent=!1,e.cylindermaterial.opacity=1,c.remove(e.tempcylindermesh),e.tempcylindermesh.geometry.dispose(),e.tempcylindermesh.material.dispose(),e.tempcylindermesh=void 0,e.tempcylindergeometry.scale(-1,1,1),!1,b.current.visible=!0,t.next=16,e.setNeighbors().then(e.RenderArrows);case 16:case"end":return t.stop()}},t)}))),s.chain(p),e.cylindermaterial.transparent=!0,s.start()};c.add(this.cylindermesh);var L=function(){var t=Object(P.a)(k.a.mark(function t(a){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.panoIdChangeReactionDisposer(),e.currLoc=e.neighbors.get(a).location,e.texture=e.loader.load(n(49)("./".concat(e.currLoc.fname)),function(){e.tempcylindermaterial=new q.MeshBasicMaterial({map:e.texture,side:q.DoubleSide}),e.tempcylindermesh=new q.Mesh(e.tempcylindergeometry,e.tempcylindermaterial),e.tempcylindergeometry.scale(-1,1,1),e.tempcylindermesh.rotation.y=e.currLoc.calibration,c.add(e.tempcylindermesh),I(a);var t=e.currLoc,n=t.coord,r=t.cameraY,o=t.id;e.panoPageStore.updateValues(n.lat,n.lng,r,o),e.setPanoPageStoreIDChangeReaction()},void 0,function(e){console.error(e)});case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();p.current&&d.current&&m.current&&this.RenderArrows();var D=Object(a.useRef)(),R=Object(a.useRef)(),T=Object(a.useRef)(),V=[new q.Vector3(0,1,0),new q.Vector3(-.6,-1,0),new q.Vector3(0,-.5,0),new q.Vector3(.6,-1,0)];function Y(e,t){var n=!0,a=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){o.value.material.opacity=t}}catch(c){a=!0,r=c}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}}T.current&&(T.current.vertices=V,T.current.faces.push(new q.Face3(0,1,2)),T.current.faces.push(new q.Face3(0,2,3)),T.current.computeFaceNormals(),T.current.scale(.3,.3,.3));var N=Object(a.useRef)();return N.current&&N.current.geometry.scale(2,2,2),Object(Q.b)(function(){xe.update(),D.current.position.set(-3*Math.sin(i.rotation.y),-.9,-3*Math.cos(i.rotation.y)),R.current.position.set(-3*Math.sin(i.rotation.y-.4),-.8,-3*Math.cos(i.rotation.y-.4)),R.current.rotation.y=i.rotation.y,R.current.rotation.z=-i.rotation.y,function(){if(b.current){for(var t=[e.cone0,e.cone1,e.cone2],n=new Map,a=0,r=t;a<r.length;a++){var o=r[a];o.visible&&n.set(S(o),o)}var i=Math.min.apply(Math,Object(X.a)(n.keys()));b.current.rotation.z=n.get(i).rotation.z,e.mouseSelectedArrowMesh=n.get(i)}}()}),r.a.createElement(r.a.Fragment,null,r.a.createElement("group",{ref:D,scale:[.2,.2,.2]},r.a.createElement("mesh",{userData:{neighbor:0},onClick:function(){L(e.n0.location.id)},onPointerOver:function(e){e.object.material.opacity=.9},onPointerOut:function(e){e.object.material.opacity=.65},ref:p,geometry:u.geometry},r.a.createElement("meshBasicMaterial",{attach:"material",color:"white",opacity:.5,transparent:!0})),r.a.createElement("mesh",{userData:{neighbor:1},onClick:function(){L(e.n1.location.id)},onPointerOver:function(e){e.object.material.opacity=.9},onPointerOut:function(e){e.object.material.opacity=.65},ref:d,geometry:u.geometry},r.a.createElement("meshBasicMaterial",{attach:"material",color:"white",opacity:.5,transparent:!0})),r.a.createElement("mesh",{userData:{neighbor:2},onClick:function(){L(e.n2.location.id)},onPointerOver:function(e){e.object.material.opacity=.9},onPointerOut:function(e){e.object.material.opacity=.65},ref:m,geometry:u.geometry},r.a.createElement("meshBasicMaterial",{attach:"material",color:"white",opacity:.5,transparent:!0}))),r.a.createElement("group",{onPointerOver:function(t){Y(t.object.children,.8),e.toggleCursor(!0)},onPointerOut:function(t){Y(t.object.children,.5),e.toggleCursor(!1)},ref:R,position:[0,0,-3],scale:[.3,.3,.3]},r.a.createElement("mesh",{onClick:function(){return e.CameraLookNorth(i)},geometry:new q.CircleGeometry(.4,100,0),ref:h},r.a.createElement("meshBasicMaterial",{attach:"material",color:"white",opacity:.5,transparent:!0})),r.a.createElement("mesh",{position:[0,.03,.01]},r.a.createElement("geometry",{attach:"geometry",ref:T}),r.a.createElement("meshBasicMaterial",{attach:"material",color:"red",opacity:.5,transparent:!0}))),r.a.createElement("group",{ref:b,rotation:[-1.5708,0,0],onPointerUp:function(){v||function(){var t=[e.n0,e.n1,e.n2][e.mouseSelectedArrowMesh.userData.neighbor].location.id;L(t)}()}},r.a.createElement("mesh",{geometry:f.geometry,position:[0,.05,.001],scale:[.2,.12,.2]},r.a.createElement("meshBasicMaterial",{attach:"material",color:"grey",opacity:.7,transparent:!0})),r.a.createElement("mesh",{geometry:new q.CircleGeometry(.4,100,0)},r.a.createElement("meshBasicMaterial",{attach:"material",color:"white",opacity:.7,transparent:!0}))))}},{key:"render",value:function(){return this.state.isLoading?r.a.createElement("div",{className:"spinner-container"},r.a.createElement(ye,{width:100,height:100})):r.a.createElement("div",{className:"Pano-container"},r.a.createElement("div",{className:"Pano-canvas",style:this.canvasStyle},r.a.createElement(Q.a,null,r.a.createElement(this.RenderPano,null))),r.a.createElement("div",null,r.a.createElement(he,{panoPageStore:this.panoPageStore})))}},{key:"panoId",get:function(){return this.props.match.params.id||"20190724143833"}}]),t}(a.Component),we=Object(m.f)(Ae),ke=(n(153),[{path:"/maps/boston",title:"Boston"},{path:"/maps/concord",title:"Concord"}]),Pe=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).gmapComponent=void 0,n.panoComponent=void 0,n.state={renderPano:!0},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(d.a,null,r.a.createElement(y,null,r.a.createElement(x,null,ke.map(function(e){return r.a.createElement(d.b,{to:e.path,key:e.path,activeClassName:"ir-nav-item__active",className:"ir-nav-item"},e.title)})),r.a.createElement(A,null,r.a.createElement(m.b,{path:"/maps/:region"},r.a.createElement(W,null),r.a.createElement(m.b,{path:"/viewPano/:id",component:function(t){return e.state.renderPano?r.a.createElement(we,t):null}})),r.a.createElement(m.a,{exact:!0,from:"/",to:"/maps/concord"}),r.a.createElement(m.a,{exact:!0,from:"/maps",to:"/maps/concord"}))))}}]),t}(a.Component);i.a.render(r.a.createElement(Pe,null),document.getElementById("interface"))}]),[[74,1,2]]]);
//# sourceMappingURL=main.da9c4f48.chunk.js.map