{"version":3,"sources":["assets/viewPano/resource sync /^/.*$","assets/mc.png","assets/rotating.png","assets/pano_inside-2-medium.png","assets/viewPano/resource/pano-20190724143458-mx.png","assets/viewPano/resource/pano-20190724143833-mx.png","assets/viewPano/resource/pano-20190724145944-mx.png","assets/viewPano/resource/pano-20190724150711-mx.png","assets/viewPano/resource/pano-20190724151238-mx.png","assets/viewPano/resource/pano-20190724151553-mx.png","assets/viewPano/resource/pano-20190925110216-mx.png","assets/viewPano/resource/pano-20190925110449-mx.png","assets/viewPano/resource/pano-20190925110659-mx.png","assets/viewPano/resource/pano-20190925111017-mx.png","assets/viewPano/resource/pano-20190925111251-mx.png","assets/viewPano/resource/pano-20190925111418-mx.png","assets/viewPano/resource/pano-20190925111628-mx.png","assets/viewPano/resource/pano-20190925111907-mx.png","assets/viewPano/resource/pano-20190925112004-mx.png","assets/viewPano/resource/pano-20190925112226-mx.png","assets/viewPano/resource/pano-20190925112242-mx.png","assets/viewPano/resource/pano-20190925112410-mx.png","assets/viewPano/resource/pano-20190925112418-mx.png","assets/viewPano/resource/pano-20190925112754-mx.png","assets/viewPano/resource/pano-20190925112757-mx.png","assets/viewPano/resource/pano-20190925112929-mx.png","assets/viewPano/resource/pano-20190925112944-mx.png","assets/viewPano/resource/pano-20190925113109-mx.png","assets/viewPano/resource/pano-20190925113249-mx.png","assets/viewPano/resource/pano-20190925113346-mx.png","components/layout.tsx","api/index.ts","maps.tsx","components/pano/minimap.tsx","components/pano/location.tsx","components/pano/shapes.tsx","components/spinner.tsx","pano.tsx","App.tsx","index.tsx"],"names":["map","./pano-20190724143458-mx.png","./pano-20190724143833-mx.png","./pano-20190724145944-mx.png","./pano-20190724150711-mx.png","./pano-20190724151238-mx.png","./pano-20190724151553-mx.png","./pano-20190925110216-mx.png","./pano-20190925110449-mx.png","./pano-20190925110659-mx.png","./pano-20190925111017-mx.png","./pano-20190925111251-mx.png","./pano-20190925111418-mx.png","./pano-20190925111628-mx.png","./pano-20190925111907-mx.png","./pano-20190925112004-mx.png","./pano-20190925112226-mx.png","./pano-20190925112242-mx.png","./pano-20190925112410-mx.png","./pano-20190925112418-mx.png","./pano-20190925112754-mx.png","./pano-20190925112757-mx.png","./pano-20190925112929-mx.png","./pano-20190925112944-mx.png","./pano-20190925113109-mx.png","./pano-20190925113249-mx.png","./pano-20190925113346-mx.png","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","p","Container","styled","div","_templateObject","Header","_templateObject2","Content","_templateObject3","NAV_BAR_HEIGHT","getDataFromJSONArray","data","query","i","length","resultArr","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","param","value","push","err","return","result","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","getNeighbors","nhood","Array","isArray","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","hood","arr","getTwoNeighbors","mockedNeighbors","prototype","apply","type","apis","getPanoFileNameById","Promise","mockedPanos","getPanoCoordById","getAllPanoIdAndCoord","getPanoAllAttrById","getNeighborsById","neighborhood","MarkerClusterer","require","StyledMap","Map","maps_templateObject","maps_templateObject2","_ref","_ref$show","show","REGIONS","boston","lat","lng","concord","center","MapContainer","_Component","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","bounds","google","maps","LatLngBounds","Clusterer","_ref2","addMarkers","styles","width","height","url","textColor","gridSize","minimumClusterSize","state","coords","inherits","createClass","key","_this2","_ref3","asyncToGenerator","regenerator_default","a","mark","_callee","wrap","_context","prev","api","then","coordArr","coord","setState","stop","arguments","getAllPanoCoords","extend","LatLng","_this3","index","marker","Marker","position","title","event","addListener","gotoPano","history","concat","goBack","console","log","react_default","createElement","ref","onMapMounted","zoom","region","initialCenter","get","match","params","Component","EnhancedMap","GoogleApiWrapper","apiKey","process","withRouter","useEffect","maps_Container","minimapElement","infoBoxElement","minimap_templateObject","minimap_templateObject2","mapHandlerInit","document","getElementsByClassName","addEventListener","preventDefault","style","minimapZoomIn","minimapZoomOut","opacity","infoBoxHovered","infoBoxUnhovered","window","back","PanoPageStore","_class","cameraY","initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","pmanOffsetY","setPegmanRotationOffsetYFromCameraY","deg","Math","ceil","PI","floor","applyDecoratedDescriptor","observable","configurable","enumerable","writable","initializer","Pegman","mapCenter","origin","Point","pegIcon","size","Size","anchor","custom","google_maps_react_dist","lid","icon","zIndex","observer","pStore","dotIcon","showComp","panoPageStore","setBounds","z","onClick","Fragment","minimap_StyledMap","onReady","streetViewControl","fullscreenControl","mapTypeControl","rotateControl","minimap_Pegman","Minimap","InfoBox","backBox","minimap","className","minimap_Container","minimap_InfoBox","Location","calibration","fname","neighborArr","setAllAttr","filename","getNeighborIds","_callee2","_context2","updateCalibration","_callee3","camera","_context3","rotation","y","alert","_x","loc","geolib","neighbor","getDistanceTo","getBearingTo","Arrow","mesh","material","geometry","THREE","vertices","faces","color","Rings","spinner_templateObject","_ref$width","_ref2$width","_ref3$color","TWEEN","Pano","currLoc","neighbors","panoIdChangeReactionDisposer","canvasStyle","cursor","cylindergeometry","cylindermaterial","cylindermesh","texture","loader","lines","tempcylindergeometry","tempcylindermaterial","tempcylindermesh","threeCamera","threeScene","cone0","cone1","cone2","pinSphereGeometry","pinNeedleGeometry","pin0","pin1","pin2","n0","n1","n2","mouseSelectedArrowMesh","teleportToScene","load","side","scale","add","animateTeleportationTextureFade","_this$currLoc","updateValues","error","fadeBegin","at","crossfade","Tween","to","easing","Easing","Quadratic","InOut","onUpdate","onComplete","fov","updateProjectionMatrix","transparent","remove","dispose","setNeighbors","RenderArrows","start","iter","cos","bearing","x","sin","visible","isLoading","RenderPano","bind","assertThisInitialized","disableBodyScroll","querySelector","panoId","loadTexture","setCurrLocAndNeighbors","clear","nidArr","nid","nextLoc","addNeighbor","n","set","location","distance","isPointer","_this4","reaction","_this5","setPanoPageStoreIDChangeReaction","_this6","rotBegin","tweenRot","updatePegmanOffset","_this7","_useThree","useThree","gl","scene","canvas","raycaster","setSize","clientWidth","clientHeight","lookAt","cone","conemesh","useRef","conemesh1","conemesh2","compassPlate","current","mouse","arrow","mouseplateG","isDraggin","rcObjects","planegeo","planemat","rcplane","computeBoundingSphere","center1","boundingSphere","v1","Vector3","coneGroup","localToWorld","distanceToArrowInWorldCoord","children","center0","v0","distanceTo","mouseDown","mouseX","startX","rotateScene","deltaX","clientX","innerWidth","clientY","innerHeight","setFromCamera","intersects","intersectObjects","intersect","copy","point","evt","onMouseMove","path","deltaY","wheelDeltaY","onScroll","targetTouches","pageX","onTouchMove","aspect","animateTransition","camAt","endAt","rotEnd","zVal","xVal","fovValue","zoomEnd","tweenZoom","_callee5","_context6","chain","transitionToScene","_ref5","_callee6","pid","_context7","_this7$currLoc","_x2","compassGroup","triGeo","triGeoArr","setChildrenOpacity","group","opc","computeFaceNormals","testMesh","useRender","update","dist","_i","_arr","min","toConsumableArray","getClosestArrowAndAdjustDirection","userData","onPointerOver","object","onPointerOut","attach","toggleCursor","CameraLookNorth","onPointerUp","navigateWithMouse","spinner","react_three_fiber_dist","routes","Interface","gmapComponent","panoComponent","renderPano","react_router_dom","r","activeClassName","react_router","component","src_pano","exact","from","ReactDOM","render","App_Interface","getElementById"],"mappings":"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","file":"static/js/main.da9c4f48.chunk.js","sourcesContent":["var map = {\n\t\"./pano-20190724143458-mx.png\": 125,\n\t\"./pano-20190724143833-mx.png\": 126,\n\t\"./pano-20190724145944-mx.png\": 127,\n\t\"./pano-20190724150711-mx.png\": 128,\n\t\"./pano-20190724151238-mx.png\": 129,\n\t\"./pano-20190724151553-mx.png\": 130,\n\t\"./pano-20190925110216-mx.png\": 131,\n\t\"./pano-20190925110449-mx.png\": 132,\n\t\"./pano-20190925110659-mx.png\": 133,\n\t\"./pano-20190925111017-mx.png\": 134,\n\t\"./pano-20190925111251-mx.png\": 135,\n\t\"./pano-20190925111418-mx.png\": 136,\n\t\"./pano-20190925111628-mx.png\": 137,\n\t\"./pano-20190925111907-mx.png\": 138,\n\t\"./pano-20190925112004-mx.png\": 139,\n\t\"./pano-20190925112226-mx.png\": 140,\n\t\"./pano-20190925112242-mx.png\": 141,\n\t\"./pano-20190925112410-mx.png\": 142,\n\t\"./pano-20190925112418-mx.png\": 143,\n\t\"./pano-20190925112754-mx.png\": 144,\n\t\"./pano-20190925112757-mx.png\": 145,\n\t\"./pano-20190925112929-mx.png\": 146,\n\t\"./pano-20190925112944-mx.png\": 147,\n\t\"./pano-20190925113109-mx.png\": 148,\n\t\"./pano-20190925113249-mx.png\": 149,\n\t\"./pano-20190925113346-mx.png\": 150\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 49;","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADUAAAA0CAYAAAAqunDVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kEGAgqEZIAg5UAAAs7SURBVGjevZpbjF1ndcd//31mxmOPx/bEcWKcQBOapKkTBTBY3KFKC6nacBHhgbZSURHwQOAFzhY8cBEXCcE5AokHUFUEqHmIkCo1KomQgkqlJqFABCgxIcVuSNI4xOPY4xmP537O/vOw197nm+PbmRtbGp05l/3tb31rff/1X//1ic2+2gbIAAENoIEN0gh2gdQBjF2+ln8Feda7v6kNTWH9d7cK6omU70eBUaShMCRDysKAeJoIA8EWUoHdRepiryAt0NTKRtdV6/JEU6VRIKQxYGcYAbaRynFt18+Ij2oD4cK/gxXgLLBUL1r/Am6qUT2DMqSd2DvCG5Ux6ZjVhDthVBGfqQ7N0kAnXnTy/TLSHE3NrzUsteZwaxXbkXYDWYRSFV6VR4w9B8wjdS46kbbB3oa0A3t7b0aJceVYBdJpmuoMapjW5B3YA2wHivr+0jsd7AWkeewhpB3AbuwJpJ3ASEyUCLkF7LPAGWAWaR4Q9k5gWwBNtUDVYs1gz5Fnl/WaBjRoGGkiJuz63nIVp2lqkbYPANcDY9gjMTGvAojV/1eT7WAvIU1jHyXPZml7HNgVIJPuyyXsKfLMG/NUqxgG9vWBgIFFYBq4CrgtjOnWAHAhxKshwqwarzfxIWASeDy8vhdpuA9MloHTlzJs6LL7SNqWAEHpHTiJtAv79WFwAXRqqLYbETozwBzSbO01exhpHHssvNEFijB6BftKpLdiP4/0ZKDqFckCDSM1gM76jJKgqXMJ2nXJs0navh771vhVN0JR4aVZ4Cns4wmI7Ad2R0gejZxk7CHg5cANATyKkBPwUuyrgEfCe/vieVM01dlo+BGbcwf2InArcF0fWBRhxDFgHPsWpFuBlwH767Asr0bkouPAs0hHgCexh4GbkK6OsZ0k6CNIJ7EhzxYvl7e0Rji/DumVtevtDDiH9BD2PqR/Cq+MJPunl2TTPZXCt7SI/TjSPRGSrw3jHVGwAjxMnp0bBNa1jsT75xEuID0NHMO+A+kdsZlTD2YRcivYy/G87UkuKhKEHAbOYt+D9CRwGJiIUP0lTZ3YGkbRC8WbsWeBBeBupOsiV1VgMoI0A/wceAz7RWA+Vn8MuBY4BBwOAzt1TpIy7P8hz75DqzgInCDPptZCldbO/VJmAa1YYSdAcQb4N+AX2Dcj3Y59YyDaCaSngIew/xt4EXg38MbgkBVtGgKep6nP/fFYehWKbd8JvDP2yALSvcBzwN3YdwE3rULS1TkKpIeB78Qi3IH99joHSt+iqf9dK5ndWOnR89xdwJuQPge8AfvfkbYl9Ob8e3rcrgKN55Fej70f6YPYbfLs2HoM2rhRPfCYQLob+GISQoOOXSHcOaT3Yf+IPFveSLGYRaVa1UfrvT6A/cUkF2nNC1sS3/uRXrU5RWLJ74zUpSmf54lLh9+7gPtWFX3rvUr07GDfRJ49s6ZoWUWTyrpmd6BYl1axFFRnhKYWL1q+lwMeAP5l0/ZnuSjDSJ8H3j/QorqOtJHgqSui7Sx4VSN+NBcP+AtgLtDsd6EluPZkuRifQGpvunhT8cWSZ642rBJ2SmJ7LU09Rdv7gmaBtCjabkT5oEh+LwbleU0w8iGk+4H3ROH3NPAk0nHsJ5AObrJBVRjfS1N/H14YA/40GP9MlDq7or57IArLHZEmikrKypJNvox0VfL+LE2tYN8GvAbpvUh/ib0bOLjpXurVYn8XBn0B+CrSR4G/xl6K8r+LtIJ9FXanlhYgy4DhpADrhqtHksdU4XhNAr9PA3/LVl1V/moVtyA1on4qkG5BOlfzy9KQsWD9dRrJEsmKpJAbCzQrmULbY9gN7IoOnUX6MyS21LByr09FNaB4/ngSRQ6t0elcsosM6MTYLrAfqYhYXwJOYU/0LQhbFIqTfcg6dEH0S+aSXRaFyoHPJQMPA+NRR7HFl4PVuw/2L+bZMGq1cqoLFHHbyLPJJFQzYFsoO1tskgvgGqCo66+mTq9Sfav9t8pT5Y2rPVfCpsJTO+K7MzGIgYPY98aCeEs8VE7yCNK28E6GNE3bo8niK8SdBn1GdJEUkxWtYgiYSdw5Hq9HYxAj3QgciyJRW+AhIf02VKrRWOgG8FjMp1r8DOlUbIkKSMjCtZ2YnCORnUkk5RFaxQT20VoKhhuBfdjf3kLk+wj2ochJDpX3Z8DeJJcZexZpuNbxpeUs4LCbDLkdez7ESsV3NwBP1J+VEvP7ge8CS7WkvHmeOkJTP0b6m6SqPkGePQdcnRg+RZ4V4anq3uWMpozdrS0vY7iDgsyWe+4A0umAcqKfdAMwjf1Aotpuxl7qIjVpFW8DroxxM+BHtIpdwN4k0R6nVQzXObQ0dLGC9KUELo29DXuyhvQyRK8F7kMaTZDmH4C7gJ9seG/1WM3XsX+DdFdo7CDNYT+ayHOK10mk8Yg2BdPoVEbNJ8BgYAdwLJSdyoMvI88ew/51osldF3rEX8Xn6QTXhnTlPvky0qeAD9d9KrsB/CwmvQe7iDnNAPPJniP0waKsfMs6aTHJUUN1bEMjDN5Jq7gV+Gek2bqFI70a+Efgduz/SJiAB/BO2g76LPA17I/VPLPkfb+jqXuxb6vTj9TAfgoYr9lPOdYieUaW1CrTSQIWcAXwDNLZeF8gvTwU1O8ndGUZOBQaxfuw7wwg0UWTc69XBfAr4AD2d5E+Gcy/6vvOAN+kVRxE2lXDOEySZyeiV+Y6JeXZXI9BtGv+NBEKarU5T0et9YokTIz9IPBW4L1JKsgCQO5B+gX2u4EPIe3H3rOqrwUnsY+FbngE+w7gPUhLCTAsYH8rmnKvTRTeDtKD2DtrrbBco7OVLK2+8nwEe2/y8Kptcwj7mrrDUYbqfyIdxv5QGFOpswJOAc8C/xpJc88qUcaeQroFeB1wfTDvIlmcWeyvxvvDtdfL18eRTgB7k0hYieIW8iwxqidQXoE9WjMMWKSpKdq+vY9cNrD/K3pNH49WD8l9C8CXaOrUBcSa0Qi1A30KlLGfBb4R4X8oWEW1GC+QZ4/S9kv6+OkZ8mzxfJberIntVBzgqGjHKG3vwn4oEm21VwrgzdjbkT6NfR9wDhiNjXsyjg6cf+XZIvbvE4K8Hfsk9veArwA3Ih2KxO945iR59iit4soEXIS9lBp0fulRKUb2mb7NvDM42I+RFmqDy1C5GftNwMNIecjIc8D/09TyJajQb8PbLwAt8uwzIfLciXRtX/dkGunntL0vTs4QYd4Fpvp1S11CzxtD2hPN6opkzkTj7TDS1dFMqx7cCMZxLDp/o/0r2Df+eFStp6JreD3SRNL2rMjzszR1hFaxN0qetIA9RZ6t9CtOl+vOj2PvSg52GHspypA/AV5ZS2eVdl4dBGnqgQFaQm/BHoujP6TiSRj0SDTL99V95F6z7xR5tnQhPTK7jPI5G/skTaajSPuA57AfRJoKbypJvNOrUsX5e4q6RkvPWJTP6QDPkWc/iDDenzTGq/1cGtQjDus4HFKCwRVUp77KUHQg3ExocC+N5tso9k/Js+MDjD0B3B57Ywk4CrwQOWlPvX96DTlHI3vpUh2RbCAqk2cL2KeCd6ULsQP7QPz/BE3dDzyCdPyiXkpD0J7G/j/sn9DUD4FnIp1cHTJdet6pJLCXMWhw/bvXsmkAu5C2rzos1YPYJWAOe3HgvlKraIRkMFrXRf2Ht8pW7DnyzIPo64M9uToKl2fd2AdTwQVV8y7HASoYGVhlKr25E3scezhZKNVdeXsSaXZQgzbW8y0nNRakcriO+b7sPoBh1eGs9BTaEtJ83XVZY0dx7b3HsoldeXAu9tqL0f7pJAx70Gs5PLQc2sjJAIPyEMg6WqR/AP8TaUdhTpMSAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/rotating.4957277e.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAMAAACecocUAAAACXBIWXMAAAAcAAAAHAAPAbmPAAAAIVBMVEUAAABVnbVRnbVRnbVdpb2l4fpVnb1dqcFVnblVobmFyeFl3ybiAAAAC3RSTlMAtb18tGwapUy9gIWpoGAAAABESURBVHja7f3HAcQwDMMAkFSzvf/A8V2aMgRfENRWAJBG0XITBuXl4tiWc0XEmkyYfrgLGehxxgnVxaWP7/P9Tr/f/h6CtgH6SIBB6wAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"static/media/pano-20190724143458-mx.072de3d6.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190724143833-mx.0732614b.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190724145944-mx.0c7531e1.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190724150711-mx.f67813cf.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190724151238-mx.3f9e7726.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190724151553-mx.c1e8bceb.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925110216-mx.15966b2a.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925110449-mx.5b18415f.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925110659-mx.a9cd19bd.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925111017-mx.d1eacec2.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925111251-mx.3a2748ab.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925111418-mx.80a5715d.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925111628-mx.c890f6ed.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925111907-mx.f5896ac6.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925112004-mx.7f51a340.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925112226-mx.a1e5bd11.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925112242-mx.4589189c.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925112410-mx.5e375cce.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925112418-mx.f8ad88bb.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925112754-mx.e2a0bfca.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925112757-mx.702d7268.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925112929-mx.dad914bf.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925112944-mx.fdd79d67.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925113109-mx.1c1e94e1.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925113249-mx.798912fc.png\";","module.exports = __webpack_public_path__ + \"static/media/pano-20190925113346-mx.0775a445.png\";","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nexport const NAV_BAR_HEIGHT = 0;\r\nexport const NAV_BAR_PADDING = 2;\r\n\r\nexport const Container = styled.div`\r\n\twidth: 100vw;\r\n\theight: 100vh;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n`;\r\n\r\nexport const Header = styled.div`\r\n\tposition: fixed;\r\n\tz-index: 999;\r\n\ttop: 10px;\r\n\tright: 10px;\r\n\tpadding: 12px;\r\n\theight: 20px;\r\n\tdisplay: flex;\r\n\tjustify-content: flex-start;\r\n\talign-items: center;\r\n\tbackground-color: #f8f8f8;\r\n    box-shadow: 2px 2px gray;\r\n\tcursor: pointer;\r\n\t& .ir-nav-item {\r\n\t\tmargin-right: 0.5rem;\r\n\t\tmargin-left: 0.5rem;\r\n\t\ttext-decoration: none;\r\n\t\tcolor: rgba(0, 0, 0, 0.5);\r\n\t}\r\n\r\n\t& .ir-nav-item__active {\r\n\t\tcolor: #000000;\r\n\t}\r\n`;\r\n\r\nexport const Content = styled.div`\r\n\tflex: 1;\r\n\tpadding: 2px;\r\n\tpadding-top: ${NAV_BAR_HEIGHT + 2}px;\r\n`;\r\n","import axios from 'axios'\r\nimport mockedPanos from '../mocks/panos.json'\r\nimport mockedNeighbors from '../mocks/neighbors.json'\r\n\r\n/*\r\nconst hostname = \"localhost\";\r\nconst port = \"8080\";\r\nconst url = 'http://' + hostname + ':' + port + '/api';\r\n\r\nconst api = axios.create({\r\n    baseURL: url,\r\n})\r\n\r\nexport const insertPano = payload => api.post(`/pano`, payload)\r\nexport const getAllPanos = () => api.get(`/panos/all`)\r\nexport const deletePanoById = id => api.delete(`/pano/${id}`)\r\nexport const getPanoById = id => api.get(`/pano/${id}`)\r\n\r\nexport const getPanoCoordById = (id) => api.get(`/pano/coord/${id}`)\r\nexport const getPanoFileNameById = id => api.get(`/pano/fname/${id}`)\r\nexport const getPanoAllAttrById = (id) => api.get(`/pano/allAttr/${id}`)\r\nexport const updateCalibrationById = (id, payload) => api.put(`/pano/cal/${id}`, payload)\r\n*/\r\n\r\nfunction getDataFromJSONArray(data, query, id?){\r\n    if(!id){//case when api resembles to 'getAllBlaBlah'\r\n        for(var i=0; i<data.length; i++){\r\n            var resultArr = [];\r\n            for(let param of query){\r\n                resultArr.push(data[i][param]);\r\n            }\r\n            return resultArr;\r\n        }\r\n    }\r\n    for(var i=0; i<data.length; i++){//case when api resembles \"getBlahBlahById\"\r\n        if(data[i][\"id\"]===id){\r\n            if(query.length===0)//case specific for \"getAllAttrById\"\r\n                return data[i];\r\n            var result = {};\r\n            for(let param of query){\r\n                result[param]=data[i][param];\r\n            }\r\n            return result;\r\n        }\r\n    }\r\n}\r\n\r\nfunction getMatrixNeighbors(){\r\n//used for getting irregular neighbor hood neighbors\r\n}\r\n\r\nfunction getNeighbors(id, nhood){\r\n    if(Array.isArray(nhood)){//in the case of a junction\r\n        var result = [];\r\n        for(let hood of nhood){\r\n            let arr = getTwoNeighbors(id,mockedNeighbors[hood]);\r\n            Array.prototype.push.apply(result, arr);\r\n        }\r\n        return result;\r\n    }else{ //linear or circular\r\n        let arr = getTwoNeighbors(id, mockedNeighbors[nhood]);\r\n        return arr;\r\n    }\r\n}\r\n\r\nfunction getTwoNeighbors(id, hood){\r\n    if(hood.map.length<2){\r\n        return [];\r\n    }\r\n    switch (hood.type) {\r\n        case \"linear\":\r\n            for (var i = 0; i < hood.map.length; i++) {\r\n                if (id === hood.map[i]) {\r\n                    if (i === 0) //first one, return second as neighbor\r\n                        return [hood.map[1]];\r\n                    else if (i === hood.map.length - 1) //last one, return the second to the last as neighbor \r\n                        return [hood.map[hood.map.length - 2]];\r\n                    //Otherwise, return the neighboring two\r\n                    return [hood.map[i - 1], hood.map[i + 1]];\r\n                }\r\n            }\r\n            break;\r\n\r\n        case \"circular\":\r\n            for (var i = 0; i < hood.map.length; i++) {\r\n                if (id === hood.map[i]) {\r\n                    if (i === 0) //first one, return last and second as neighbor\r\n                        return [hood.map[1], hood.map[hood.map.length-1]];\r\n                    else if (i === hood.map.length - 1) //last one, return the second to the last and first as neighbor \r\n                        return [hood.map[hood.map.length - 2], hood.map[0]];\r\n                    //Otherwise, return the neighboring two\r\n                    return [hood.map[i - 1], hood.map[i + 1]];\r\n                }\r\n            }\r\n            break;\r\n\r\n        case \"irregular\":\r\n            return hood.map[id];\r\n    }\r\n    \r\n    \r\n}\r\n\r\n// Should use superagent to mock when we have time\r\nexport const getPanoCoordById = (id) => Promise.resolve({ data: { data: getDataFromJSONArray(mockedPanos,[\"coord\"], id) } })\r\n//export const getAllPanoIdAndCoord = () => Promise.resolve({ data: { data: getDataFromJSON(mockedPanos,[\"id\", \"coord\"]) } })\r\nexport const getAllPanoIdAndCoord = () => Promise.resolve({ data: { data: mockedPanos } })\r\nexport const getPanoAllAttrById = (id) => Promise.resolve({ data: { data: getDataFromJSONArray(mockedPanos,[], id) } })\r\nexport const getPanoFileNameById = (id) => Promise.resolve({ data: { data:  getDataFromJSONArray(mockedPanos,[\"filename\"], id) } })\r\nexport const getNeighborsById = (id, neighborhood) => Promise.resolve({ data: { data: getNeighbors(id, neighborhood) } })\r\n\r\nconst apis = {\r\n    //insertPano,\r\n    //getAllPanos,\r\n    //deletePanoById,\r\n    //getPanoById,\r\n    //updateCalibrationById,\r\n\r\n    getPanoFileNameById,\r\n    getPanoCoordById,\r\n    getAllPanoIdAndCoord,\r\n    getPanoAllAttrById,\r\n    getNeighborsById\r\n}\r\n\r\nexport default apis","import React, {Component, useRef, useEffect} from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport {Map, GoogleApiWrapper, Marker} from 'google-maps-react'\r\nimport {withRouter, RouteComponentProps} from 'react-router-dom'\r\nimport styled from 'styled-components'\r\nimport api from './api/index'\r\n\r\nconst MarkerClusterer = require('node-js-marker-clusterer');\r\n\r\n// I believe there is a bug of google-maps-react\r\n// as it does not respect the custom style object you pass\r\n// in. So we have to use important for now\r\n// TODO:\r\n// look for better map candidate\r\nconst StyledMap = styled(Map)`\r\n  width: 100%;\r\n  height: 100%;\r\n  position: relative !important;\r\n`\r\n\r\nconst Container = styled.div<{show: boolean}>`\r\n  width: 100%;\r\n  height: 100%;\r\n  display: ${({show = false}) => (show ? 'block' : 'none')};\r\n\r\n  & > div {\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n`\r\n\r\nconst REGIONS = {\r\n  boston: {\r\n    lat: 42.36,\r\n    lng: -71.053\r\n  },\r\n  concord: {\r\n    lat: 42.45955,\r\n    lng: -71.3525\r\n  },\r\n  center: {\r\n    lat: 42.4,\r\n    lng: -71.2\r\n  }\r\n}\r\n\r\nexport interface Coordinate {\r\n  id: string | number\r\n  lat: number\r\n  lng: number\r\n}\r\n\r\nexport interface MapContainerState {\r\n  coords?: Coordinate[]\r\n}\r\n\r\nexport interface MapContainerProps extends RouteComponentProps<{region?: string}> {}\r\n\r\nexport class MapContainer extends Component<MapContainerProps, MapContainerState> {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      coords: []\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    var getAllPanoCoords = async () => {\r\n      await api.getAllPanoIdAndCoord().then(result => {\r\n        var coordArr = []\r\n        let data = result.data.data\r\n        for (var i = 0; i < data.length; i++) {\r\n          coordArr.push({\r\n            id: data[i].id,\r\n            lat: data[i].coord.lat,\r\n            lng: data[i].coord.lng\r\n          })\r\n        }\r\n        this.setState({\r\n          coords: coordArr\r\n        })\r\n      })\r\n    }\r\n    getAllPanoCoords()\r\n  }\r\n\r\n  bounds = new (this.props as any).google.maps.LatLngBounds()\r\n\r\n  setBounds() {\r\n    const {coords} = this.state\r\n    if (!coords) return\r\n\r\n    for (var i = 0; i < coords.length; i++) {\r\n      let coord = coords[i]\r\n      this.bounds.extend(\r\n        new (this.props as any).google.maps.LatLng({\r\n          lat: coord.lat,\r\n          lng: coord.lng\r\n        })\r\n      )\r\n    }\r\n  }\r\n\r\n  addMarkers(map, google) {\r\n    const {coords} = this.state\r\n    if (!coords) return\r\n\r\n    return coords.map((coord, index) => {\r\n      const marker = new google.maps.Marker({\r\n        position: { lat: coord.lat, lng: coord.lng },\r\n        map: map,\r\n        title: coord.id\r\n      })\r\n      \r\n      google.maps.event.addListener(marker, 'click', () => {\r\n        this.gotoPano(marker.title);\r\n      });\r\n\r\n      return marker;\r\n    })\r\n  }\r\n\r\n  gotoPano(id) {\r\n    // @ts-ignore\r\n    this.props.history.push(`/viewPano/${id}`)\r\n    //console.log(this.props);\r\n  }\r\n\r\n  goBack(){\r\n    // @ts-ignore\r\n    this.props.history.goBack();\r\n    console.log(\"go back\");\r\n  }\r\n\r\n  get region() {\r\n    return this.props.match ? this.props.match.params.region : 'boston'\r\n  }\r\n\r\n  Clusterer = ({map, google}) => {\r\n    if(!map)\r\n      return (null)\r\n    //console.log(map);\r\n    const mc = new MarkerClusterer(map, this.addMarkers(map, google), {\r\n      styles: [{\r\n        width: 53,\r\n        height: 52,\r\n        url: require('./assets/mc.png'),\r\n        textColor: 'white',\r\n      }],\r\n      gridSize: 20,\r\n      minimumClusterSize: 6\r\n    });\r\n    return (null);\r\n  }\r\n\r\n  render() {\r\n\r\n    return (\r\n      \r\n      <StyledMap\r\n        ref={(this.props as any).onMapMounted}\r\n        google={(this.props as any).google}\r\n        zoom={11}\r\n        center={REGIONS[this.region]}\r\n        initialCenter={REGIONS.center}\r\n        bounds={this.bounds}\r\n      >\r\n        <this.Clusterer />\r\n      </StyledMap>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nconst EnhancedMap = GoogleApiWrapper({\r\n  apiKey: `${process.env.REACT_APP_GOOGLE_MAPS_API_KEY}`\r\n \r\n})(MapContainer)\r\n\r\n// google-maps-react is making an higher-order-component\r\n// in a stupid way, as there is no way for us to change\r\n// the container tag (always div), and the container does not\r\n// accept className prop, which makes it hard for us to style\r\nexport default withRouter(props => {\r\n  useEffect(() => {\r\n    return () => {\r\n      console.log('GMap...dying')\r\n    }\r\n  }, [])\r\n\r\n  return (\r\n    <Container show={!!props.match}>\r\n      <EnhancedMap {...props} />\r\n    </Container>\r\n  )\r\n})\r\n","import React, { Component, useEffect } from \"react\";\r\nimport { Map, GoogleApiWrapper, Marker } from \"google-maps-react\";\r\nimport { withRouter, RouteComponentProps } from \"react-router-dom\";\r\nimport styled from \"styled-components\";\r\nimport { observable } from \"mobx\";\r\nimport { observer } from \"mobx-react\";\r\n\r\nimport api from \"../../api/index\";\r\n\r\nconst StyledMap = styled(Map)`\r\n\twidth: 100% !important;\r\n\theight: 100% !important;\r\n\tposition: relative !important;\r\n`;\r\n\r\nconst Container = styled.div`\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\r\n\t& > div {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n`;\r\n\r\nvar minimapElement, infoBoxElement;\r\nvar mapHandlerInit = () => {\r\n\tminimapElement = (document.getElementsByClassName('Minimap') as HTMLCollectionOf<HTMLElement>)[0];\r\n\t//console.log(minimapElement[0]);\r\n\tminimapElement.addEventListener(\"mouseover\", e => minimapZoomIn(e), false);\r\n\tminimapElement.addEventListener(\"mouseout\", e => minimapZoomOut(e), false);\r\n\r\n\tinfoBoxElement = (document.getElementsByClassName('InfoBox') as HTMLCollectionOf<HTMLElement>)[0];\r\n\tinfoBoxElement.addEventListener(\"mouseover\", e => infoBoxHovered(e), false);\r\n\tinfoBoxElement.addEventListener(\"mouseout\", e => infoBoxUnhovered(e), false);\r\n\tinfoBoxElement.addEventListener(\"mousedown\", e => goBack(e), false);\r\n}\r\nfunction minimapZoomIn(e){\r\n\te.preventDefault();\r\n\tminimapElement.style.width = \"250px\";\r\n\tminimapElement.style.height = \"200px\";\r\n}\r\n\r\nfunction minimapZoomOut(e){\r\n\te.preventDefault();\r\n\tminimapElement.style.width = \"200px\";\r\n\tminimapElement.style.height = \"100px\";\r\n}\r\n\r\nfunction infoBoxHovered(e){\r\n\te.preventDefault();\r\n\tinfoBoxElement.style.opacity = \"0.75\";\r\n}\r\n\r\nfunction infoBoxUnhovered(e){\r\n\te.preventDefault();\r\n\tinfoBoxElement.style.opacity = \"0.5\";\r\n}\r\n\r\nfunction goBack(e) {\r\n\te.preventDefault();\r\n\twindow.history.back();\r\n}\r\n\r\nexport interface Coordinate {\r\n\tid: string | number;\r\n\tlat: number;\r\n\tlng: number;\r\n}\r\nexport interface MapContainerState {\r\n\tshowComp: boolean;\r\n\tcoords?: Coordinate[];\r\n}\r\n\r\ntype center = {\r\n\tlng: string,\r\n\tlat: string,\r\n\tbearing: string\r\n}\r\n\r\nexport interface MapContainerProps extends RouteComponentProps<{PanoPageStore}> {}\r\n\r\nexport class PanoPageStore {\r\n\t@observable lng:number;\r\n\t@observable lat:number;\r\n\t//@observable bearing:number;\r\n\t@observable id:string;\r\n\t@observable pmanOffsetY:number;\r\n\r\n\tconstructor(lat, lng, cameraY, id){\r\n\t\tthis.lng = lng;\r\n\t\tthis.lat = lat;\r\n\t\t//this.bearing = this.cameraYtoAbsRadian( cameraY );\r\n\t\tthis.id = id;\r\n\t\tthis.pmanOffsetY = this.setPegmanRotationOffsetYFromCameraY(cameraY);\r\n\t}\r\n\r\n\tupdateValues(lat, lng, cameraY, id){\r\n\t\tthis.lng = lng;\r\n\t\tthis.lat = lat;\r\n\t\t//this.bearing = this.cameraYtoAbsRadian( cameraY );\r\n\t\tthis.id = id;\r\n\t\tthis.pmanOffsetY = this.setPegmanRotationOffsetYFromCameraY(cameraY);\r\n\t}\r\n\r\n\tupdatePegmanOffset(cameraY){\r\n\t\tthis.pmanOffsetY = this.setPegmanRotationOffsetYFromCameraY(cameraY);\r\n\t}\r\n\r\n\tsetPegmanRotationOffsetYFromCameraY(cameraY){\r\n\t\tvar deg = Math.ceil(-cameraY*180/Math.PI);\r\n\t\tif(deg<0){\r\n\t\t\tdeg = 360+deg;\r\n\t\t}\r\n\t\treturn 9+Math.floor(deg/22.5)*60;\r\n\t}\r\n} \r\n\r\nconst Pegman = ({ id, lat, lng, pmanOffsetY, google, map, mapCenter }) => {\r\n\r\n\tvar origin = new google.maps.Point(8, 9);\r\n\tif (pmanOffsetY) {\r\n\t\torigin = new google.maps.Point(8, pmanOffsetY);\r\n\t}\r\n\tvar pegIcon = {\r\n\t\turl: require(`../../assets/rotating.png`),\r\n\t\tsize: new google.maps.Size(44, 49),\r\n\t\torigin: origin,\r\n\t\tanchor: new google.maps.Point(22, 34),\r\n\t\tcustom: true\r\n\t};\r\n\r\n\treturn <Marker\r\n\t\tlid={id}\r\n\t\tposition={{lat: lat, lng: lng}}\r\n\t\ticon={pegIcon}\r\n\t\tkey={id}\r\n\t\tgoogle={google}\r\n\t\tmap={map}\r\n\t\tmapCenter={mapCenter}\r\n\t\tzIndex={100}\r\n\t/>\r\n}\r\n\r\n\r\n@observer\r\nclass MapContainer extends Component<MapContainerProps, MapContainerState> {\r\n\t\r\n\tpStore:PanoPageStore;\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tshowComp: false\r\n\t\t};\r\n\t\tthis.pStore = (this.props as any).panoPageStore;\r\n\t}\r\n\t\r\n\r\n\tcomponentDidMount() {\r\n\t\tvar getAllPanoCoords = async () => {\r\n\t\t\tawait api.getAllPanoIdAndCoord().then(result => {\r\n\t\t\t\tvar coordArr = [];\r\n\t\t\t\tlet data = result.data.data;\r\n\t\t\t\tfor (var i = 0; i < data.length; i++) {\r\n\t\t\t\t\tcoordArr.push({\r\n\t\t\t\t\t\tid: data[i].id,\r\n\t\t\t\t\t\tlat: data[i].coord.lat,\r\n\t\t\t\t\t\tlng: data[i].coord.lng\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tcoords: coordArr,\r\n\t\t\t\t\tshowComp: true\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t};\r\n\t\tgetAllPanoCoords();\r\n\t}\r\n\r\n\tshowComponent(i) {\r\n\t\tif (i !== true && i !== false) return;\r\n\t\tthis.setState({ showComp: i });\r\n\t}\r\n\r\n\tbounds = new (this.props as any).google.maps.LatLngBounds();\r\n\r\n\tsetBounds() {\r\n\t\tfor (var i = 0; i < (this.state as any).coords.length; i++) {\r\n\t\t\tlet coord = (this.state as any).coords[i];\r\n\t\t\tthis.bounds.extend(\r\n\t\t\t\tnew (this.props as any).google.maps.LatLng({\r\n\t\t\t\t\tlat: coord.lat,\r\n\t\t\t\t\tlng: coord.lng\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tdotIcon = {\r\n\t\turl: require(`../../assets/pano_inside-2-medium.png`),\r\n\t\tsize: new (this.props as any).google.maps.Size(11, 11),\r\n\t\torigin: new (this.props as any).google.maps.Point(0, 0),\r\n\t\tanchor: new (this.props as any).google.maps.Point(5.5, 5.5)\r\n\t};\r\n\r\n\taddMarkers() {\r\n\t\tthis.setBounds();\r\n\t\t//let map = new Map(this.refs.map,);\r\n\t\t//(this.props as any).google.maps.fitBounds(this.bounds);\r\n\t\tvar icon;\r\n\t\tvar z = 1;\r\n\t\treturn (this.state as any).coords.map((coord, index) => {\r\n\t\t\tif ((this.state as any).coords[index].id === this.pStore.id) {\r\n\t\t\t\t\r\n\t\t\t}else{\r\n\t\t\t\ticon = this.dotIcon;\r\n\t\t\t\tz++;\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Marker\r\n\t\t\t\t\t\tlid={coord.id}\r\n\t\t\t\t\t\tposition={{\r\n\t\t\t\t\t\t\tlat: coord.lat,\r\n\t\t\t\t\t\t\tlng: coord.lng\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\treturn this.gotoPano(e.lid);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ticon={icon}\r\n\t\t\t\t\t\tkey={coord.id}\r\n\t\t\t\t\t\tzIndex={z}\r\n\t\t\t\t\t/>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\r\n\tgotoPano(id) {\r\n\t\t// @ts-ignore\r\n\t\t//this.props.history.push(`/viewPano/${id}`);\r\n\t\t//console.log(\"Update id: \"+id);\r\n\t\tthis.pStore.id = id;\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { showComp } = this.state;\r\n\r\n\t\treturn showComp ? (\r\n\t\t\t<>\r\n\t\t\t\t<StyledMap\r\n\t\t\t\t\tref={(this.props as any).onMapMounted}\r\n\t\t\t\t\tgoogle={(this.props as any).google}\r\n\t\t\t\t\tzoom={17}\r\n\t\t\t\t\tcenter={{ lat: this.pStore.lat, lng: this.pStore.lng }}\r\n\t\t\t\t\tinitialCenter={{ lat: this.pStore.lat, lng: this.pStore.lng }}\r\n\t\t\t\t\tbounds={this.bounds}\r\n\t\t\t\t\tonReady={mapHandlerInit}\r\n\t\t\t\t\tstreetViewControl={false}\r\n\t\t\t\t\tfullscreenControl={false}\r\n\t\t\t\t\tmapTypeControl={false}\r\n\t\t\t\t\trotateControl={false}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Pegman id={this.pStore.id} lat={this.pStore.lat} lng={this.pStore.lng} pmanOffsetY={this.pStore.pmanOffsetY} />\r\n\t\t\t\t\t{this.addMarkers()}\r\n\t\t\t\t</StyledMap>\r\n\t\t\t</>\r\n\t\t) : null;\r\n\t}\r\n}\r\n\r\nconst Minimap = GoogleApiWrapper({\r\n\tapiKey: `${process.env.REACT_APP_GOOGLE_MAPS_API_KEY}`\r\n})(withRouter(MapContainer));\r\n\r\n\r\nclass InfoBox extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t}\r\n\r\n\tbackBox(){\r\n\t\treturn(\r\n\t\t\t<div >\r\n\t\t\t\t<span>  </span>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\ttextBox(){\r\n\t\treturn(\r\n\t\t\t<div>\r\n\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\trender(){\r\n\t\treturn(\r\n\t\t\t<this.backBox />\r\n\t\t)\r\n\t}\r\n\r\n\r\n}\r\n\r\nexport default props => (\r\n\t<>\r\n\t\t<div className=\"Minimap\">\r\n\t\t\t<Container>\r\n\t\t\t\t<Minimap {...props} />\r\n\r\n\t\t\t</Container>\r\n\r\n\t\t</div>\r\n\t\t<div className=\"InfoBox\">\r\n\t\t\t<InfoBox />\r\n\t\t</div>\r\n\t</>\r\n);\r\n","import * as geolib from 'geolib'\r\nimport api from '../../api/index'\r\n\r\nclass Location {\r\n    //Members\r\n    coord: {\r\n        lat: number,\r\n        lng: number\r\n    } = { lat: 0, lng: 0 }\r\n    calibration: number = 0.0;\r\n    id: string;\r\n    fname: string = \"\";\r\n    neighborhood: string = \"\";\r\n    neighborArr\r\n    cameraY\r\n\r\n    //Methods\r\n    constructor(id: string) {\r\n        this.id = id;\r\n    }\r\n\r\n    setAllAttr = async () => {\r\n        await api.getPanoAllAttrById(this.id).then(result => {\r\n            this.fname = result.data.data.filename;\r\n            this.coord.lat = result.data.data.coord.lat;\r\n            this.coord.lng = result.data.data.coord.lng;\r\n            this.calibration = result.data.data.calibration;\r\n            this.neighborhood = result.data.data.neighborhood;\r\n        })\r\n    }\r\n\r\n    getNeighborIds = async () => {\r\n        await api.getNeighborsById(this.id, this.neighborhood).then(result => {\r\n            this.neighborArr = result.data.data;\r\n        })\r\n    }\r\n\r\n    getDistanceTo(loc: Location){\r\n        return geolib.getDistance(this.coord,loc.coord);\r\n    }\r\n\r\n    getDistanceToNeighbors(neighbor: Location[]) {\r\n        return neighbor.map(this.getDistanceTo);\r\n    }\r\n\r\n    getBearingTo(loc: Location) {\r\n        return geolib.getRhumbLineBearing(this.coord, loc.coord);\r\n    }\r\n\r\n    getBearingToNeighbors(neighbor: Location[]) {\r\n        return neighbor.map(this.getBearingTo);\r\n    }\r\n\r\n    updateCalibration = async (camera) => {\r\n        const payload = {\r\n            \"calibration\": -camera.rotation.y\r\n        }\r\n        //await api.updateCalibrationById(this.id,payload).then(res=>{\r\n        alert(\"Update Calibration is disabled at this moment!\");\r\n        //})\r\n    }\r\n}\r\n\r\nexport { Location }\r\n","import * as THREE from 'three'\r\n\r\nclass Cylinder {\r\n  //Members\r\n  mesh: THREE.Mesh\r\n  material: THREE.MeshBasicMaterial\r\n  geometry: THREE.CylinderBufferGeometry\r\n  texture: THREE.Texture\r\n  loader: THREE.TextureLoader\r\n\r\n  constructor() {\r\n    this.geometry = new THREE.CylinderBufferGeometry(20, 20, 15, 100, 1, true)\r\n    this.texture = new THREE.Texture()\r\n    this.loader = new THREE.TextureLoader()\r\n    this.material = new THREE.MeshBasicMaterial()\r\n    this.mesh = new THREE.Mesh(this.geometry, this.material)\r\n  }\r\n\r\n  LoadPanoTexture(fname: string, onComplete: Function) {\r\n    this.texture = this.loader.load(\r\n      process.env.PUBLIC_URL + 'resource/' + fname,\r\n      undefined,\r\n      undefined,\r\n      err => {\r\n        console.error(err)\r\n      }\r\n    )\r\n  }\r\n}\r\n\r\nclass Arrow {\r\n  //Members\r\n  mesh: THREE.Mesh\r\n  material: THREE.MeshBasicMaterial\r\n  geometry\r\n  id: string\r\n\r\n  constructor() {\r\n    this.geometry = new THREE.Geometry()\r\n    this.geometry.vertices.push(\r\n      new THREE.Vector3(0, 0, 0), // 0\r\n      new THREE.Vector3(1.5, -2, 0), // 1\r\n      new THREE.Vector3(1.5, -0.5, 0), // 2\r\n      new THREE.Vector3(0, 1.5, 0), // 3\r\n      new THREE.Vector3(-1.5, -0.5, 0), // 4\r\n      new THREE.Vector3(-1.5, -2, 0) // 5\r\n    )\r\n    this.geometry.faces.push(\r\n      new THREE.Face3(0, 1, 2),\r\n      new THREE.Face3(0, 2, 3),\r\n      new THREE.Face3(4, 0, 3),\r\n      new THREE.Face3(5, 0, 4)\r\n    )\r\n\r\n    this.material = new THREE.MeshBasicMaterial({color: 'white'})\r\n    this.mesh = new THREE.Mesh(this.geometry, this.material)\r\n  }\r\n  onClickHandler() {}\r\n}\r\n\r\nexport {Arrow, Cylinder}\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Rings = styled.div`\r\n\t&,\r\n\t&:after {\r\n\t\tborder-radius: 50%;\r\n\t\twidth: ${({ width = \"48\" }) => width}px;\r\n\t\theight: ${({ width = \"48\" }) => width}px;\r\n\t}\r\n\t& {\r\n\t\tmargin: 60px auto;\r\n\t\tfont-size: 10px;\r\n\t\tposition: relative;\r\n\t\ttext-indent: -9999em;\r\n\t\tborder-top: 1.1em solid rgba(0, 0, 0, 0.1);\r\n\t\tborder-right: 1.1em solid rgba(0, 0, 0, 0.1);\r\n\t\tborder-bottom: 1.1em solid rgba(0, 0, 0, 0.1);\r\n\t\tborder-left: 1.1em solid ${({ color = \"#ea6c2f\" }) => color};\r\n\t\t-webkit-transform: translateZ(0);\r\n\t\t-ms-transform: translateZ(0);\r\n\t\ttransform: translateZ(0);\r\n\t\t-webkit-animation: load8 1.1s infinite linear;\r\n\t\tanimation: load8 1.1s infinite linear;\r\n\t}\r\n\t@-webkit-keyframes load8 {\r\n\t\t0% {\r\n\t\t\t-webkit-transform: rotate(0deg);\r\n\t\t\ttransform: rotate(0deg);\r\n\t\t}\r\n\t\t100% {\r\n\t\t\t-webkit-transform: rotate(360deg);\r\n\t\t\ttransform: rotate(360deg);\r\n\t\t}\r\n\t}\r\n\t@keyframes load8 {\r\n\t\t0% {\r\n\t\t\t-webkit-transform: rotate(0deg);\r\n\t\t\ttransform: rotate(0deg);\r\n\t\t}\r\n\t\t100% {\r\n\t\t\t-webkit-transform: rotate(360deg);\r\n\t\t\ttransform: rotate(360deg);\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport default Rings;\r\n","import React, { Component, useRef } from \"react\";\r\nimport * as THREE from \"three\";\r\nimport { Canvas, useThree, useRender } from \"react-three-fiber\";\r\nimport { withRouter, RouteComponentProps } from \"react-router-dom\";\r\n//import SVGLoader from \"three-svg-loader\";\r\nimport { disableBodyScroll } from 'body-scroll-lock';\r\n\r\nimport \"./style/pano.css\";\r\nimport Minimap, {PanoPageStore} from \"./components/pano/minimap\"\r\nimport { Location } from \"./components/pano/location\";\r\nimport { Arrow, Cylinder } from \"./components/pano/shapes\";\r\nimport Spinner from \"./components/spinner\";\r\nimport { observable, reaction } from \"mobx\";\r\nimport { Vector3 } from \"three\";\r\n//import { observer } from \"mobx-react\";\r\n//import OrbitControls from 'three-orbitcontrols'\r\n\r\nconst TWEEN = require(\"@tweenjs/tween.js\");\r\n\r\ninterface PanoProps extends RouteComponentProps<{ id?: string, position? }> {\r\n\tlid: string;\r\n}\r\n\r\ntype PanoState = { isLoading: boolean };\r\ntype NeighborType = {\r\n\tlocation: Location;\r\n\tdistance: number;\r\n\tbearing: number;\r\n};\r\n\r\nclass Pano extends Component<PanoProps, PanoState> {\r\n\t//Members\r\n\tcurrLoc: Location;\r\n\tneighbors: Map<string, NeighborType>;\r\n\tpanoPageStore = undefined;\r\n\tpanoIdChangeReactionDisposer;\r\n\tcanvasStyle = {cursor:\"default\"};\t\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tisLoading: true\r\n\t\t};\r\n\t\tthis.RenderPano = this.RenderPano.bind(this);\r\n\t}\r\n\t\r\n\tget panoId() {\r\n\t\t// @ts-ignore\r\n\t\treturn this.props.match.params.id || \"20190724143833\";\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tdisableBodyScroll(document.querySelector('#interface'));\r\n\t\tvar setCurrLocAndNeighbors = async () => {\r\n\t\t\t//setCurrLoc\r\n\t\t\tthis.currLoc = new Location(this.panoId);\r\n\t\t\t\r\n\t\t\tawait this.currLoc.setAllAttr().then(() => {\r\n\t\t\t\tthis.loadTexture();\r\n\t\t\t});\r\n\t\t\t//setNeighbors\r\n\t\t\tthis.neighbors = new Map();\r\n\t\t\tthis.setNeighbors();\r\n\t\t};\r\n\t\tsetCurrLocAndNeighbors();\r\n\t}\r\n\r\n\tcomponentWillUnmount(){\r\n\t\tconsole.log(\"Unmount pano...\");\r\n\t}\r\n\t\r\n\tasync setNeighbors() {//Only supports two neighbors for now\r\n        this.neighbors.clear();//Purge previous neighbors\r\n\t\tawait this.currLoc.getNeighborIds();\r\n\t\tlet nidArr = this.currLoc.neighborArr;\r\n\t\tif((nidArr as any).length===0){\r\n\t\t\tconsole.log(\"No neighbors discorvered...\");\r\n\t\t\treturn ;\r\n\t\t}\r\n\t\telse{\r\n\t\t\tfor(let nid of nidArr as any){\r\n\t\t\t\tlet nextLoc = new Location(nid);\r\n\t\t\t\tawait nextLoc.setAllAttr().then(() => {\r\n\t\t\t\t\tthis.addNeighbor(nextLoc);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\taddNeighbor(n: Location) {\r\n\t\tthis.neighbors.set(n.id, {\r\n\t\t\tlocation: n,\r\n\t\t\tdistance: this.currLoc.getDistanceTo(n),\r\n\t\t\tbearing: this.currLoc.getBearingTo(n)\r\n\t\t});\r\n\t}\r\n\r\n\ttoggleCursor(isPointer){\r\n\t\tif(isPointer){\r\n\t\t\tthis.canvasStyle = {cursor:\"pointer\"}\r\n\t\t}else{\r\n\t\t\tthis.canvasStyle = {cursor:\"default\"}\r\n\t\t}\r\n\t}\r\n\r\n\t//THREEjs objects\r\n\tcylindergeometry = new THREE.CylinderBufferGeometry(20, 20, 15, 100, 1, true);\r\n\tcylindermaterial = undefined;\r\n\tcylindermesh = undefined;\r\n\ttexture = undefined;\r\n\tloader = new THREE.TextureLoader();\r\n\tlines = [];\r\n\t\r\n    tempcylindergeometry = new THREE.CylinderBufferGeometry(21, 21, 15, 100, 1, true);\r\n\ttempcylindermaterial = undefined;\r\n\ttempcylindermesh = undefined;\r\n\tthreeCamera = undefined;\r\n\tthreeScene = undefined;\r\n\r\n\tcone0:THREE.Mesh;\r\n\tcone1:THREE.Mesh;\r\n\tcone2:THREE.Mesh;\r\n\r\n\tpinSphereGeometry = new THREE.SphereGeometry(0.5,16,16);\r\n\tpinNeedleGeometry = new THREE.CylinderGeometry(0.075, 0.025, 3, 10, 1, false);\r\n\tpin0:THREE.Group;\r\n\tpin1:THREE.Group;\r\n\tpin2:THREE.Group;\r\n\r\n\t//Neighbors\r\n\tn0:NeighborType;\r\n\tn1:NeighborType;\r\n\tn2:NeighborType;\r\n\r\n\tmouseSelectedArrowMesh:THREE.Mesh;\r\n\r\n\tsetPanoPageStoreIDChangeReaction() {\r\n\t\tthis.panoIdChangeReactionDisposer = reaction(\r\n\t\t\t() => this.panoPageStore.id,\r\n\t\t\t(id, reaction) => {\r\n\t\t\t\tthis.teleportToScene(id);\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tloadTexture() {\r\n\t\tthis.texture = this.loader.load(\r\n\t\t\trequire(`./assets/viewPano/resource/${this.currLoc.fname}`),\r\n\t\t\t() => {\r\n\t\t\t\tthis.panoPageStore = new PanoPageStore(this.currLoc.coord.lat, this.currLoc.coord.lng, 0.0, this.currLoc.id);\r\n\t\t\t\tthis.setPanoPageStoreIDChangeReaction();\r\n\t\t\t\tthis.setState({ isLoading: false });\r\n\t\t\t},\r\n\t\t\tundefined,\r\n\t\t\terr => {\r\n\t\t\t\tconsole.error(err);\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t\tthis.cylindermaterial = new THREE.MeshBasicMaterial({\r\n\t\t\tmap: this.texture,\r\n\t\t\tside: THREE.DoubleSide\r\n\t\t});\r\n\t\tthis.cylindermesh = new THREE.Mesh(\r\n\t\t\tthis.cylindergeometry,\r\n\t\t\tthis.cylindermaterial\r\n\t\t);\r\n\t\tthis.cylindergeometry.scale(-1, 1, 1);\r\n\t\t//this.cylindermesh.position.y = 0\r\n        this.cylindermesh.rotation.y = this.currLoc.calibration;\r\n\t}\r\n\t\r\n\r\n\t/*\r\n\tInitNeighborPins() {\r\n\t\tconsole.log(this.lines);\r\n\t\tif (this.lines.length !== 0) {\r\n\t\t\tthis.lines = [];\r\n\t\t}\r\n\t\tthis.neighbors.forEach((loc, id) => {\r\n\t\t\tlet bearing = loc.bearing;\r\n\t\t\tlet line = new THREE.LineBasicMaterial({ color: \"blue\" });\r\n\t\t\tlet geometry = new THREE.Geometry();\r\n\t\t\tgeometry.vertices.push(new THREE.Vector3(0, -5, 0));\r\n\t\t\tgeometry.vertices.push(\r\n\t\t\t\tnew THREE.Vector3(\r\n\t\t\t\t\t20 * Math.sin((bearing * Math.PI) / 180),\r\n\t\t\t\t\t-5,\r\n\t\t\t\t\t-20 * Math.cos((bearing * Math.PI) / 180)\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t\tthis.lines.push(new THREE.Line(geometry, line));\r\n\t\t});\r\n\t}*/\r\n\r\n\tCameraLookNorth(camera) {\r\n\t\tvar rotBegin = {\r\n\t\t\tat: camera.rotation.y\r\n\t\t};\r\n\t\tvar rotEnd = {\r\n\t\t\tat: 0\r\n\t\t};\r\n\t\tvar tweenRot = new TWEEN.Tween(rotBegin)\r\n\t\t\t.to(rotEnd, 750)\r\n\t\t\t.easing(TWEEN.Easing.Quadratic.InOut);\r\n\t\ttweenRot.onUpdate(function() {\r\n\t\t\tcamera.rotation.y = rotBegin.at;\r\n\t\t});\r\n\t\ttweenRot.onComplete(() => {\r\n\t\t\tcamera.rotation.y = 0;\r\n\t\t\tthis.panoPageStore.updatePegmanOffset(0.0);\r\n\t\t});\r\n\t\ttweenRot.start();\r\n\t}\r\n\r\n\tteleportToScene = async (id) => {\r\n\t\t//console.log(\"Teleporting to: \"+id);\r\n\t\tthis.currLoc = new Location(id);\r\n\t\tawait this.currLoc.setAllAttr().then(()=>{\r\n\t\t\tthis.texture = this.loader.load(\r\n\t\t\t\trequire(`./assets/viewPano/resource/${this.currLoc.fname}`),\r\n\t\t\t\t() => {//onComplete\r\n\t\t\t\t\tthis.tempcylindermaterial = new THREE.MeshBasicMaterial({\r\n\t\t\t\t\t\tmap: this.texture,\r\n\t\t\t\t\t\tside: THREE.DoubleSide\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.tempcylindermesh = new THREE.Mesh(\r\n\t\t\t\t\t\tthis.tempcylindergeometry,\r\n\t\t\t\t\t\tthis.tempcylindermaterial\r\n\t\t\t\t\t);\r\n\t\t\t\t\tthis.tempcylindergeometry.scale(-1, 1, 1);\r\n\t\t\t\t\tthis.tempcylindermesh.rotation.y = this.currLoc.calibration;\r\n\t\t\t\t\tthis.threeScene.add(this.tempcylindermesh);\r\n\t\t\t\t\tthis.animateTeleportationTextureFade();\r\n\t\t\t\t\tlet {coord, cameraY, id} = this.currLoc;\r\n\t\t\t\t\tthis.panoPageStore.updateValues(coord.lat, coord.lng, cameraY, id);\r\n\t\t\t\t},\r\n\t\t\t\tundefined,\r\n\t\t\t\terr => {\r\n\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\tanimateTeleportationTextureFade = () => {\r\n\t\tvar fadeBegin = {\r\n\t\t\tat: this.cylindermaterial.opacity\r\n\t\t};\r\n\t\tvar fadeEnd = {\r\n\t\t\tat: 0.1\r\n\t\t};\r\n\t\tvar crossfade = new TWEEN.Tween(fadeBegin)\r\n\t\t\t.to(fadeEnd, 500)\r\n\t\t\t.easing(TWEEN.Easing.Quadratic.InOut);\r\n\t\tcrossfade.onUpdate(() => {\r\n\t\t\t//console.log(this.cylindermaterial);\r\n\t\t\tthis.cylindermaterial.opacity = fadeBegin.at;\r\n\t\t});\r\n\t\tcrossfade.onComplete( async () => {\r\n\t\t\t//reset camera zoom and pos\r\n\t\t\tthis.threeCamera.rotation.y = 0;\r\n\t\t\t(this.threeCamera as any).fov = 40;\r\n\t\t\t(this.threeCamera as any).updateProjectionMatrix();\r\n\t\t\t//When animations are completed, textures are swapped\r\n\t\t\t\r\n\t\t\tthis.cylindermaterial.map = this.texture;\r\n\t\t\tthis.cylindermesh.rotation.y = this.currLoc.calibration;\r\n\t\t\tthis.cylindermaterial.transparent = false;\r\n\t\t\tthis.cylindermaterial.opacity = 1.0;\r\n\r\n\t\t\tthis.threeScene.remove(this.tempcylindermesh);\r\n\t\t\tthis.tempcylindermesh.geometry.dispose();\r\n\t\t\tthis.tempcylindermesh.material.dispose();\r\n\t\t\tthis.tempcylindermesh = undefined;\r\n\t\t\tthis.tempcylindergeometry.scale(-1,1,1);\r\n\t\t\tawait this.setNeighbors().then(this.RenderArrows);\r\n\t\t});\r\n\t\tthis.cylindermaterial.transparent = true;\r\n\t\tcrossfade.start();\r\n\t}\r\n\r\n\tRenderArrows = () => {\r\n\t\tvar iter = this.neighbors.keys();\r\n\t\t//iter.next();\r\n\t\tthis.n0 = this.neighbors.get(iter.next().value);\r\n\t\tconsole.log(this.currLoc.id);\r\n\t\tlet arrowSpacing = 7.5;\r\n\t\t//position\r\n\t\tthis.cone0.position.z = - arrowSpacing * Math.cos(this.n0.bearing * Math.PI / 180);\r\n\t\tthis.cone0.position.x = arrowSpacing * Math.sin(this.n0.bearing * Math.PI / 180);\r\n\t\t//rotation\r\n\t\tthis.cone0.rotation.x = -1.5708;\r\n\t\tthis.cone0.rotation.z = (-this.n0.bearing) * Math.PI / 180;\r\n\t\tthis.cone1.visible = false;\r\n\t\tthis.cone2.visible = false;\r\n\t\t//this.cone0.geometry.computeBoundingSphere();\r\n\t\t\r\n\t\tif(this.neighbors.size>1){\r\n\t\t\tthis.n1 = this.neighbors.get(iter.next().value);\r\n\t\t\tthis.cone1.visible = true;\r\n\t\t\t//position\r\n\t\t\tthis.cone1.position.z = -arrowSpacing * Math.cos(this.n1.bearing * Math.PI / 180);\r\n\t\t\tthis.cone1.position.x = arrowSpacing * Math.sin(this.n1.bearing * Math.PI / 180);\r\n\t\t\t//rotation\r\n\t\t\tthis.cone1.rotation.x = -1.5708;\r\n\t\t\tthis.cone1.rotation.z = (-this.n1.bearing) * Math.PI / 180;\r\n\t\t\t//console.log(this.cone1.rotation.z);\r\n\t\t\t//this.cone1.geometry.computeBoundingSphere();\r\n\t\t\t//console.log(this.cone1.localToWorld(this.cone1.geometry.boundingSphere.center));\r\n\t\t}\r\n\t\tif(this.neighbors.size===3){\r\n\t\t\tthis.n2 = this.neighbors.get(iter.next().value);\r\n\t\t\tthis.cone2.visible = true;\r\n\t\t\t//position\r\n\t\t\tthis.cone2.position.z = -arrowSpacing * Math.cos(this.n2.bearing * Math.PI / 180);\r\n\t\t\tthis.cone2.position.x = arrowSpacing * Math.sin(this.n2.bearing * Math.PI / 180);\r\n\t\t\t//rotation\r\n\t\t\tthis.cone2.rotation.x = -1.5708;\r\n\t\t\tthis.cone2.rotation.z = (-this.n2.bearing) * Math.PI / 180;\r\n\t\t\t//this.cone2.geometry.computeBoundingSphere();\r\n\t\t\t//console.log(this.cone2.rotation.z);\r\n\t\t}\r\n\t}\r\n\r\n\tRenderPano() {\r\n\t\tvar { gl, camera, scene, canvas, raycaster } = useThree();\r\n\t\t//var canvas = gl.domElement;  // for react-three-fiber v3.x\r\n\t\tthis.threeCamera = camera;\r\n\t\tthis.threeScene = scene;\r\n\t\t\r\n\t\t(camera as any).fov = 40;\r\n\t\t//gl.setSize(window.innerWidth, window.innerHeight);\r\n\t\tgl.setSize(canvas.clientWidth, canvas.clientHeight);\r\n\t\t\r\n\t\tcamera.position.set(0, 0, 0.0);\r\n\t\tcamera.lookAt(0, 0, 0);\r\n\r\n\t\tlet cone = new Arrow();\r\n\t\tvar conemesh = useRef();\r\n\t\tvar conemesh1 = useRef();\r\n\t\tvar conemesh2 = useRef();\r\n\t\t//var mousedir = useRef();\r\n\t\tvar compassPlate = useRef();\r\n\r\n\t\tthis.cone0 = conemesh.current as any;\r\n\t\tthis.cone1 = conemesh1.current as any;\r\n\t\tthis.cone2 = conemesh2.current as any;\r\n\r\n\t\t\r\n\r\n\t\tvar mouse = { x: 0, y: 0 };\r\n\t\tlet arrow = new Arrow();\r\n\t\tlet mouseplateG = useRef();\r\n\t\tvar showMousePlate = true;\r\n\t\tvar isAnimating = false;\r\n\t\tlet isDraggin = false;\r\n\t\r\n\t\tvar rcObjects = [];\r\n\r\n\t\tvar planegeo = new THREE.PlaneGeometry(40, 40);\r\n\t\tvar planemat = new THREE.MeshBasicMaterial({ color: \"grey\", side: THREE.DoubleSide, opacity:0.0, transparent:true });\r\n\t\tvar rcplane = new THREE.Mesh(planegeo, planemat); //not a remotely-controlled plane, but a mathematical plane that involves in raycast\r\n\t\trcplane.rotation.set(-1.5708, 0, 0);\r\n\t\trcplane.position.set(0,-1,0);\r\n\t\tscene.add(rcplane);\r\n\t\tif (conemesh.current && conemesh1.current && conemesh2.current && compassPlate.current) {\r\n\t\t\trcObjects.push(conemesh.current);\r\n\t\t\trcObjects.push(conemesh1.current);\r\n\t\t\trcObjects.push(conemesh2.current);\r\n\t\t\trcObjects.push(compassPlate.current);\r\n\t\t\trcObjects.push(rcplane);\r\n\t\t\t//rcObjects.push(compassGroup.current);\r\n\t\t}\r\n\r\n\t\tvar bsphere = useRef();\r\n\t\tif(bsphere.current){\r\n\t\t\tthis.cone0.geometry.computeBoundingSphere();\r\n\t\t\tlet center1 = this.cone0.geometry.boundingSphere.center;\r\n\t\t\tlet v1 = new Vector3(center1.x,center1.y,center1.z);\r\n\t\t\t//@ts-ignore\r\n\t\t\tconeGroup.current.localToWorld(v1);\r\n\t\t}\r\n\r\n\t\tvar distanceToArrowInWorldCoord = (mesh) => {\r\n\t\t\t(mouseplateG.current as any).children[1].geometry.computeBoundingSphere();\r\n\t\t\tlet center0 = (mouseplateG.current as any).children[1].geometry.boundingSphere.center;\r\n\t\t\tlet v0 = new Vector3(center0.x,center0.y,center0.z);\r\n\t\t\t(mouseplateG.current as any).localToWorld(v0);\r\n\r\n\t\t\tmesh.geometry.computeBoundingSphere();\r\n\t\t\tlet center1 = mesh.geometry.boundingSphere.center;\r\n\t\t\tlet v1 = new Vector3(center1.x,center1.y,center1.z);\r\n\t\t\tmesh.localToWorld(v1);\r\n\t\t\t\r\n\t\t\treturn v0.distanceTo(v1);\r\n\t\t}\r\n\r\n\t\tvar getClosestArrowAndAdjustDirection = () => {\r\n\t\t\tif(!mouseplateG.current)\r\n\t\t\t\treturn;\r\n\t\t\tlet arr = [this.cone0, this.cone1, this.cone2];\r\n\t\t\tlet dist = new Map<number, THREE.Mesh>();\r\n\t\t\tfor(let cone of arr){\r\n\t\t\t\tif(!cone.visible){\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tdist.set( distanceToArrowInWorldCoord(cone), cone );\r\n\t\t\t}\r\n\t\t\tlet min = Math.min(...dist.keys());\r\n\t\t\t(mouseplateG.current as any).rotation.z = dist.get(min).rotation.z;\r\n\t\t\tthis.mouseSelectedArrowMesh = dist.get(min);\r\n\t\t}\r\n\r\n\t\tvar navigateWithMouse = () => {\r\n\t\t\tlet nArr = [this.n0, this.n1, this.n2];\r\n\t\t\tlet id = nArr[this.mouseSelectedArrowMesh.userData.neighbor].location.id;\r\n\t\t\ttransitionToScene(id);\r\n\t\t}\r\n\r\n\t\tvar onMouseMove2 = ( event ) => {\r\n\t\t\tif(mouseplateG.current){\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tmouse.x = (event.clientX / window.innerWidth) * 2 - 1;\r\n\t\t\t\tmouse.y = - (event.clientY / window.innerHeight) * 2 + 1;\r\n\t\t\t\traycaster.setFromCamera(mouse, camera);\r\n\t\t\t\tvar intersects = raycaster.intersectObjects(rcObjects);\r\n\t\t\t\tif (intersects.length > 0) {\r\n\t\t\t\t\tvar intersect = intersects[0];\r\n\t\t\t\t\t//console.log( intersects[ 0 ]);\r\n\t\t\t\t\tif( intersects.length === 1){//intersect.object===rcplane){\r\n\t\t\t\t\t\t//console.log(compassGroup.current);\r\n\t\t\t\t\t\t(mouseplateG.current as any).visible = true;\r\n\t\t\t\t\t\t(mouseplateG.current as any).position.copy(intersect.point).add(new THREE.Vector3(0, 0.01, 0));\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t(mouseplateG.current as any).visible = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Mouse drag rotation controls\r\n\t\tvar mouseDown = false,\r\n\t\t\tmouseX = 0,\r\n\t\t\tmouseY = 0;\r\n\r\n\t\tfunction onMouseMove(evt) {\r\n\t\t\tif (mouseDown) {\r\n\t\t\t\tevt.preventDefault();\r\n\t\t\t\tvar deltaX = evt.clientX - mouseX,\r\n\t\t\t\t\tdeltaY = evt.clientY - mouseY;\r\n\t\t\t\tmouseX = evt.clientX;\r\n\t\t\t\tmouseY = evt.clientY;\r\n\r\n\t\t\t\trotateScene(deltaX);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfunction onMouseDown(evt) {\r\n\t\t\tevt.preventDefault();\r\n\t\t\tmouseDown = true;\r\n\t\t\tmouseX = evt.clientX;\r\n\t\t\tmouseY = evt.clientY;\r\n\t\t}\r\n\r\n\t\tfunction onMouseUp(evt) {\r\n\t\t\tevt.preventDefault();\r\n\t\t\tmouseDown = false;\r\n\t\t\tisDraggin = false;\r\n\t\t}\r\n\r\n\t\t//Touch rotation control\r\n\t\tvar startX = 0;\r\n\r\n\t\tfunction onTouchStart(event) {\r\n\t\t\tstartX = (event.targetTouches[0].pageX);\r\n\t\t}\r\n\r\n\t\tfunction onTouchMove(event) {\r\n\t\t\tvar deltaX = (event.targetTouches[0].pageX - startX);\r\n\t\t\tstartX = (event.targetTouches[0].pageX);\r\n\t\t\trotateScene(deltaX);\r\n\t\t}\r\n\r\n\t\t//Mouse wheel rotation control\r\n\t\tfunction onScroll(event) {\r\n\t\t\tif(event.path[0]===canvas){\r\n\t\t\t\tvar deltaY = event.wheelDeltaY / 3;\r\n\t\t\t\trotateScene(deltaY);\r\n\t\t\t}\r\n        }\r\n        \r\n\t\tvar rotateScene = (deltaX) => {\r\n\t\t\tisDraggin = true;\r\n\t\t\tcamera.rotation.y += deltaX / 1000;\r\n\t\t\tcamera.rotation.y %= 2 * Math.PI;\r\n\t\t\tthis.panoPageStore.updatePegmanOffset(camera.rotation.y);\r\n\t\t}\r\n\t\t\r\n\t\tfunction onWindowResize(){\r\n\t\t\tgl.setSize(canvas.clientWidth, canvas.clientHeight);\r\n\t\t\t(camera as any).aspect = canvas.clientWidth / canvas.clientHeight;\r\n\t\t\t(camera as any).updateProjectionMatrix();\r\n\t\t}\r\n\r\n\r\n\t\twindow.addEventListener('mousemove', onMouseMove2, false);\r\n\t\tcanvas.addEventListener(\"mousemove\", e => onMouseMove(e), false);\r\n\t\tcanvas.addEventListener(\"mousedown\", e => onMouseDown(e), false);\r\n\t\tcanvas.addEventListener(\"mouseup\", e => onMouseUp(e), false);\r\n\t\tcanvas.addEventListener(\"mousewheel\", e => onScroll(e),false);\r\n\t\tcanvas.addEventListener(\"touchmove\", e => onTouchMove(e), false);\r\n\t\tcanvas.addEventListener(\"touchstart\", e => onTouchStart(e), false);\r\n\t\twindow.addEventListener( 'resize', onWindowResize, false );\r\n\r\n\t\tvar animateTransition = id => {\r\n\t\t\t(mouseplateG.current as any).visible = false;\r\n\t\t\tisAnimating = true;\r\n            //Set up parameters for TWEEN animations\r\n\t\t\tconst depth = 13;\r\n\t\t\tconst resFov = 65;\r\n\t\t\tconst camAt = (this.neighbors.get(id).bearing * Math.PI) / 180;\r\n\t\t\tvar endAt = (-this.neighbors.get(id).bearing * Math.PI) / 180;\r\n\t\t\tif (camera.rotation.y > 0) {\r\n\t\t\t\tendAt = 2 * Math.PI - (this.neighbors.get(id).bearing * Math.PI) / 180;\r\n\t\t\t}\r\n\t\t\tif(camera.rotation.y-endAt >= Math.PI && camera.rotation.y-endAt<2*Math.PI){\r\n\t\t\t\tendAt += 2 * Math.PI; \r\n\t\t\t}else if( camera.rotation.y-endAt <= -Math.PI && camera.rotation.y-endAt< -2*Math.PI){\r\n\t\t\t\tendAt = - 2 * Math.PI + endAt;\r\n\t\t\t}\r\n\t\t\tvar rotBegin = {\r\n\t\t\t\tat: (camera as any).rotation.y\r\n\t\t\t};\r\n\t\t\tvar rotEnd = {\r\n\t\t\t\tat: endAt\r\n\t\t\t};\r\n\t\t\tvar tweenRot = new TWEEN.Tween(rotBegin)\r\n\t\t\t\t.to(rotEnd, 500)\r\n\t\t\t\t.easing(TWEEN.Easing.Quadratic.InOut);\r\n\t\t\ttweenRot.onUpdate(function() {\r\n\t\t\t\t(camera as any).rotation.y = rotBegin.at;\r\n\t\t\t});\r\n\t\t\ttweenRot.onComplete(() => {\r\n\t\t\t\tcamera.rotation.y = (-this.neighbors.get(id).bearing * Math.PI) / 180;\r\n\t\t\t\tthis.panoPageStore.updatePegmanOffset(camera.rotation.y);\r\n\t\t\t});\r\n\r\n\t\t\tvar zoom = {\r\n\t\t\t\tzVal: (camera as any).position.z,\r\n\t\t\t\txVal: (camera as any).position.x,\r\n                fovValue: (camera as any).fov,\r\n                opacity: this.cylindermaterial.opacity\r\n\t\t\t};\r\n\t\t\tvar zoomEnd = {\r\n\t\t\t\tzVal: -depth * Math.cos(camAt),\r\n\t\t\t\txVal: depth * Math.sin(camAt),\r\n                fovValue: resFov,\r\n                opacity: 0.1\r\n\t\t\t};\r\n\t\t\tvar tweenZoom = new TWEEN.Tween(zoom).to(zoomEnd, 500);\r\n\r\n\t\t\ttweenZoom.onUpdate(() => {\r\n\t\t\t\t(camera as any).position.z = zoom.zVal;\r\n\t\t\t\t(camera as any).position.x = zoom.xVal;\r\n\t\t\t\t(camera as any).fov = zoom.fovValue;\r\n                (camera as any).updateProjectionMatrix();\r\n                this.cylindermaterial.opacity = zoom.opacity;\r\n\t\t\t});\r\n\t\t\ttweenZoom.onComplete(async () => {\r\n                //reset camera zoom and pos\r\n                camera.position.set(0,0,0);\r\n\t\t\t\t(camera as any).fov = 40;\r\n                (camera as any).updateProjectionMatrix();\r\n                //When animations are completed, textures are swapped\r\n                \r\n                this.cylindermaterial.map = this.texture;\r\n                this.cylindermesh.rotation.y = this.currLoc.calibration;\r\n                this.cylindermaterial.transparent = false;\r\n                this.cylindermaterial.opacity = 1.0;\r\n\r\n                scene.remove(this.tempcylindermesh);\r\n                this.tempcylindermesh.geometry.dispose();\r\n                this.tempcylindermesh.material.dispose();\r\n                this.tempcylindermesh = undefined;\r\n\t\t\t\tthis.tempcylindergeometry.scale(-1,1,1);\r\n\t\t\t\tisAnimating = false;\r\n\t\t\t\t(mouseplateG.current as any).visible = true;\r\n\t\t\t\tawait this.setNeighbors().then(this.RenderArrows);//.then(()=>{this.InitNeighborPins()});\r\n\t\t\t});\r\n            tweenRot.chain(tweenZoom);\r\n            this.cylindermaterial.transparent = true;\r\n            \r\n\t\t\ttweenRot.start();\r\n\t\t};\r\n        \r\n        scene.add(this.cylindermesh);\r\n\t\t//RenderCompass();\r\n\r\n\t\tvar transitionToScene = async (pid) => {\r\n\t\t\tthis.panoIdChangeReactionDisposer();\r\n\t\t\tthis.currLoc = this.neighbors.get(pid).location;\r\n\t\t\t//await this.currLoc.setAllAttr();\r\n\t\t\tthis.texture = this.loader.load(\r\n\t\t\t\trequire(`./assets/viewPano/resource/${this.currLoc.fname}`),\r\n\t\t\t\t() => {//onComplete\r\n                    this.tempcylindermaterial = new THREE.MeshBasicMaterial({\r\n                        map: this.texture,\r\n                        side: THREE.DoubleSide\r\n                    });\r\n                    this.tempcylindermesh = new THREE.Mesh(\r\n                        this.tempcylindergeometry,\r\n                        this.tempcylindermaterial\r\n                    );\r\n                    this.tempcylindergeometry.scale(-1, 1, 1);\r\n                    this.tempcylindermesh.rotation.y = this.currLoc.calibration;\r\n                    scene.add(this.tempcylindermesh);\r\n\t\t\t\t\tanimateTransition(pid);\r\n\t\t\t\t\tlet {coord, cameraY, id} = this.currLoc;\r\n\t\t\t\t\tthis.panoPageStore.updateValues(coord.lat, coord.lng, cameraY, id);\r\n\t\t\t\t\tthis.setPanoPageStoreIDChangeReaction();\r\n\t\t\t\t},\r\n\t\t\t\tundefined,\r\n\t\t\t\terr => {\r\n\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t};\r\n\t\t\r\n        if(conemesh.current&&conemesh1.current&&conemesh2.current){\r\n\t\t\tthis.RenderArrows();\r\n        }\r\n\t\tvar coneGroup = useRef();\r\n\t\tvar compassGroup = useRef();\r\n\t\tvar triGeo = useRef();\r\n\t\tlet triGeoArr = [new THREE.Vector3(0, 1, 0), new THREE.Vector3(-0.6, -1, 0), new THREE.Vector3(0, -0.5, 0), new THREE.Vector3(0.6, -1, 0)];\r\n\t\tif (triGeo.current){\r\n\t\t\t(triGeo.current as any).vertices = triGeoArr;\r\n\t\t\t(triGeo.current as any).faces.push( new THREE.Face3( 0, 1, 2 ) );\r\n\t\t\t(triGeo.current as any).faces.push( new THREE.Face3( 0, 2, 3 ) );\r\n\t\t\t(triGeo.current as any).computeFaceNormals();\r\n\t\t\t(triGeo.current as any).scale(0.3, 0.3, 0.3);\r\n\t\t}\r\n\t\tfunction setChildrenOpacity(group, opc){\r\n\t\t\tfor(let child of group){\r\n\t\t\t\tchild.material.opacity = opc;\r\n\t\t\t}\r\n        }\r\n        \r\n        var testMesh = useRef();\r\n        if(testMesh.current){\r\n            (testMesh.current as any).geometry.scale(2,2,2);\r\n\t\t}\r\n\r\n\t\tuseRender(() => {\r\n\t\t\tTWEEN.update();\r\n\t\t\t(coneGroup.current as any).position.set(\r\n\t\t\t\t-3 * Math.sin(camera.rotation.y),\r\n\t\t\t\t-0.9,\r\n\t\t\t\t-3 * Math.cos(camera.rotation.y)\r\n\t\t\t);\r\n\t\t\t(compassGroup.current as any).position.set(\r\n\t\t\t\t-3 * Math.sin(camera.rotation.y-0.4),\r\n\t\t\t\t-0.8,\r\n\t\t\t\t-3 * Math.cos(camera.rotation.y-0.4)\r\n\t\t\t);\r\n\t\t\t(compassGroup.current as any).rotation.y=camera.rotation.y;\r\n\t\t\t(compassGroup.current as any).rotation.z=-camera.rotation.y;\r\n\t\t\t\r\n\t\t\tgetClosestArrowAndAdjustDirection();\r\n\t\t\t\r\n\r\n\t\t});\r\n\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<group /*group of arrows */\r\n\r\n\t\t\t\t\tref={coneGroup}\r\n\t\t\t\t\tscale={[0.2, 0.2, 0.2]}\r\n\t\t\t\t>\r\n\t\t\t\t\t<mesh //First Arrow\r\n\t\t\t\t\t\tuserData={{neighbor:0}}\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\ttransitionToScene(this.n0.location.id); /*this.currLoc.updateCalibration(camera)*/\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonPointerOver={e => {(e.object as any).material.opacity=0.9;}}\r\n\t\t\t\t\t\tonPointerOut={e => {(e.object as any).material.opacity=0.65;}}\r\n\t\t\t\t\t\tref={conemesh}\r\n\t\t\t\t\t\tgeometry={cone.geometry}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<meshBasicMaterial attach=\"material\" color=\"white\" opacity={0.5} transparent={true}/>\r\n\t\t\t\t\t</mesh>\r\n\t\t\t\t\t<mesh //Second Arrow\r\n\t\t\t\t\t\tuserData={{neighbor:1}}\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\ttransitionToScene(this.n1.location.id);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonPointerOver={e => {(e.object as any).material.opacity=0.9;}}\r\n\t\t\t\t\t\tonPointerOut={e => {(e.object as any).material.opacity=0.65;}}\r\n                        ref={conemesh1}\r\n                        geometry={cone.geometry}\r\n                    >\r\n                        <meshBasicMaterial attach=\"material\" color=\"white\" opacity={0.5} transparent={true}/>\r\n                    </mesh>\r\n\t\t\t\t\t<mesh //Third Arrow\r\n\t\t\t\t\t\tuserData={{neighbor:2}}\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\ttransitionToScene(this.n2.location.id);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonPointerOver={e => {(e.object as any).material.opacity=0.9;}}\r\n\t\t\t\t\t\tonPointerOut={e => { (e.object as any).material.opacity = 0.65; }}\r\n\t\t\t\t\t\tref={conemesh2}\r\n\t\t\t\t\t\tgeometry={cone.geometry}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<meshBasicMaterial attach=\"material\" color=\"white\" opacity={0.5} transparent={true} />\r\n\t\t\t\t\t</mesh>\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t</group>\r\n\t\t\t\t<group\r\n\t\t\t\t\tonPointerOver={e => {setChildrenOpacity(e.object.children, 0.8); this.toggleCursor(true);}}\r\n\t\t\t\t\tonPointerOut={e => {setChildrenOpacity(e.object.children, 0.5); this.toggleCursor(false);}}\r\n\t\t\t\t\tref={compassGroup}\r\n\t\t\t\t\tposition={[0,0,-3]}\r\n\t\t\t\t\tscale={[0.3, 0.3, 0.3]}\r\n\t\t\t\t>\r\n\t\t\t\t\t<mesh //Compass Plate \r\n\t\t\t\t\t\tonClick={() => this.CameraLookNorth(camera)}\r\n\t\t\t\t\t\tgeometry={new THREE.CircleGeometry(0.4, 100, 0)}\r\n\t\t\t\t\t\tref={compassPlate}\t\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<meshBasicMaterial attach=\"material\" color=\"white\" opacity={0.5} transparent={true} />\r\n\t\t\t\t\t</mesh>\r\n\t\t\t\t\t<mesh //Compass North Arrow \r\n\t\t\t\t\t\tposition={[0, 0.03, 0.01]}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<geometry\r\n\t\t\t\t\t\t\tattach=\"geometry\"\r\n\t\t\t\t\t\t\tref={triGeo}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<meshBasicMaterial attach=\"material\" color=\"red\" opacity={0.5} transparent={true} />\r\n\t\t\t\t\t</mesh>\r\n\t\t\t\t</group>\r\n\r\n\t\t\t\t<group\r\n\t\t\t\t\tref={mouseplateG}\r\n\t\t\t\t\trotation={[-1.5708, 0, 0]}\r\n\t\t\t\t\tonPointerUp={()=>{if(!isDraggin){ navigateWithMouse(); }}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<mesh\r\n\t\t\t\t\t\tgeometry={arrow.geometry}\r\n\t\t\t\t\t\tposition={[0, 0.05, 0.001]}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tscale={[0.2, 0.12, 0.2]}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<meshBasicMaterial attach=\"material\" color=\"grey\" opacity={0.7} transparent={true} />\r\n\t\t\t\t\t</mesh>\r\n\t\t\t\t\t<mesh\r\n\t\t\t\t\t\tgeometry={new THREE.CircleGeometry(0.4, 100, 0)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<meshBasicMaterial attach=\"material\" color=\"white\" opacity={0.7} transparent={true} />\r\n\t\t\t\t\t</mesh>\r\n\t\t\t\t</group>\r\n\r\n\t\t\t\t{/*<group\r\n\t\t\t\t\tref={pinGroup}\r\n\t\t\t\t\tposition={[-7, 0.1, -7]}\r\n\t\t\t\t\tscale={[0.5,0.5,0.5]}\r\n\t\t\t\t>\r\n\t\t\t\t\t<group\r\n\t\t\t\t\t\tref={ping0}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<mesh\r\n\t\t\t\t\t\t\tgeometry={this.pinNeedleGeometry}\r\n\t\t\t\t\t\t\tposition={[0, -2, 0]}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<meshBasicMaterial attach=\"material\" color=\"white\" opacity={0.75} transparent={true} />\r\n\t\t\t\t\t\t</mesh>\r\n\t\t\t\t\t\t<mesh\r\n\t\t\t\t\t\t\tgeometry={this.pinSphereGeometry}\r\n\t\t\t\t\t\t\tposition={[0, 0, 0]}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<meshBasicMaterial attach=\"material\" color=\"red\" opacity={0.75} transparent={true} />\r\n\t\t\t\t\t\t</mesh>\r\n\t\t\t\t\t</group>\r\n\t\t\t\t</group>*/}\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n\t//TODO: change the pano window render size\r\n\trender() {\r\n\t\tconst { isLoading } = this.state;\r\n\t\treturn isLoading ? (\r\n\t\t\t<div className={\"spinner-container\"}>\r\n\t\t\t\t<Spinner width={100} height={100} />\r\n\t\t\t</div>\r\n\t\t) : (\r\n\t\t\t<div className=\"Pano-container\">\r\n\t\t\t\t<div className=\"Pano-canvas\" style={this.canvasStyle}>\r\n\t\t\t\t\t<Canvas>\r\n\t\t\t\t\t\t<this.RenderPano />\r\n\t\t\t\t\t</Canvas>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Minimap panoPageStore={this.panoPageStore}/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withRouter(Pano);\r\n","import React, {Component, useRef} from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport {HashRouter as Router, Route, Switch, NavLink, Redirect} from 'react-router-dom'\r\nimport { observable, reaction } from \"mobx\";\r\nimport {Container, Header, Content} from './components/layout'\r\nimport GMap from './maps'\r\nimport Pano from './pano'\r\nimport './style/App.css'\r\n\r\nconst routes = [\r\n  {\r\n    path: '/maps/boston',\r\n    title: 'Boston'\r\n  },\r\n  {\r\n    path: '/maps/concord',\r\n    title: 'Concord'\r\n  }\r\n]\r\n\r\nexport class Interface extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      renderPano: true\r\n    }\r\n  }\r\n\r\n  gmapComponent;\r\n  panoComponent;\r\n\r\n \r\n\r\n  render() {\r\n    return (\r\n      <Router>\r\n        <Container>\r\n          {<Header>\r\n            {routes.map(r => (\r\n              <NavLink\r\n                to={r.path}\r\n                key={r.path}\r\n                activeClassName=\"ir-nav-item__active\"\r\n                className=\"ir-nav-item\"\r\n              >\r\n                {r.title}\r\n              </NavLink>\r\n            ))}\r\n            </Header>}\r\n          <Content>\r\n            <Route path=\"/maps/:region\">\r\n              <GMap />\r\n              <Route\r\n                path=\"/viewPano/:id\"\r\n                component={props => ((this.state as any).renderPano ? <Pano {...props} /> : null)}\r\n              />\r\n            </Route>\r\n            <Redirect exact from=\"/\" to=\"/maps/concord\" />\r\n            <Redirect exact from=\"/maps\" to=\"/maps/concord\" />\r\n          </Content>\r\n        </Container>\r\n      </Router>\r\n    )\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './style/index.css';\r\nimport * as App from './App';\r\n\r\nReactDOM.render(<App.Interface />, document.getElementById('interface'));\r\n\r\n"],"sourceRoot":""}